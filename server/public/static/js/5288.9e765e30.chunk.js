"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5288],{5288:function(t,e,i){i.r(e),i.d(e,{dyte_mixed_grid:function(){return d}});var n=i(5671),a=i(3144),u=i(325),s=i(1654),r=i(7239),c=i(859),o=i(222),l=i(9013),d=function(){function t(e){(0,n.Z)(this,t),(0,u.r)(this,e),this.layout="row",this.participants=[],this.pinnedParticipants=[],this.screenShareParticipants=[],this.plugins=[],this.aspectRatio="16:9",this.gap=8,this.size=void 0,this.meeting=void 0,this.states=void 0,this.config=s.d,this.iconPack=r.d,this.t=(0,c.u)(),this.activeTab=void 0,this.initialised=void 0}return(0,a.Z)(t,[{key:"componentWillLoad",value:function(){this.initialised=!1,this.screenShareParticipantsChanged(this.screenShareParticipants),this.pluginsChanged(this.plugins),this.initialised=!0}},{key:"connectedCallback",value:function(){this.meetingChanged(this.meeting)}},{key:"disconnectedCallback",value:function(){var t;null===(t=this.meeting.spotlight)||void 0===t||t.removeListener("activeTabUpdate",this.spotlightTabUpdateListener)}},{key:"meetingChanged",value:function(t){var e,i,n,a,u=this;null!=t&&(void 0!=(null===(e=t.spotlight)||void 0===e?void 0:e.selfActiveTab)&&this.onSpotlightTabUpdate(null===(i=t.spotlight.selfActiveTab)||void 0===i?void 0:i.type,null===(n=t.spotlight.selfActiveTab)||void 0===n?void 0:n.id),this.spotlightTabUpdateListener=function(t){u.onSpotlightTabUpdate(null===t||void 0===t?void 0:t.type,null===t||void 0===t?void 0:t.id)},null===(a=t.spotlight)||void 0===a||a.addListener("activeTabUpdate",this.spotlightTabUpdateListener))}},{key:"screenShareParticipantsChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(this.initialised||null==this.activeTab)&&(null==this.activeTab&&t.length>0?this.setActiveTab({type:"screenshare",participant:t[0]}):this.revalidateActiveTab())}},{key:"pluginsChanged",value:function(t){if(this.initialised||null==this.activeTab)if(t.length>0){var e=t.length-1;this.setActiveTab({type:"plugin",plugin:t[e]})}else this.revalidateActiveTab()}},{key:"revalidateActiveTab",value:function(){if(null!=this.activeTab)if("screenshare"===this.activeTab.type){var t=this.activeTab.participant;this.screenShareParticipants.some((function(e){return e.id===t.id}))||this.reassignActiveTab()}else{var e=this.activeTab.plugin;this.plugins.some((function(t){return t.id===e.id}))||this.reassignActiveTab()}}},{key:"setActiveTab",value:function(t){var e,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activeTab=t;var n="screenshare"===t.type?t.participant.id:t.plugin.id;i&&(null===(e=this.meeting.spotlight)||void 0===e||e.setSelfActiveTab({type:t.type,id:n},0))}},{key:"reassignActiveTab",value:function(){if(this.screenShareParticipants.length>0)this.setActiveTab({type:"screenshare",participant:this.screenShareParticipants[0]});else if(this.plugins.length>0){var t=this.plugins.length-1;this.setActiveTab({type:"plugin",plugin:this.plugins[t]})}}},{key:"shouldShowSwitcher",value:function(){return this.screenShareParticipants.length+this.plugins.length>1}},{key:"onSpotlightTabUpdate",value:function(t,e){if(void 0!=t&&void 0!=e)switch(t){case"plugin":var i=this.plugins.find((function(t){return t.id===e}));void 0!=i&&this.setActiveTab({type:"plugin",plugin:i},!1);break;case"screenshare":var n=this.screenShareParticipants.find((function(t){return t.id===e}));void 0!=n&&this.setActiveTab({type:"screenshare",participant:n},!1)}}},{key:"render",value:function(){var t=this,e={meeting:this.meeting,config:this.config,states:this.states,size:this.size,iconPack:this.iconPack,t:this.t};return(0,u.h)(u.H,null,(0,u.h)("main",{id:"main-view",part:"main-view"},this.shouldShowSwitcher()&&(0,u.h)("div",{id:"switcher",key:"switcher"},(0,u.h)("dyte-spotlight-indicator",{meeting:this.meeting,iconPack:this.iconPack,t:this.t}),this.screenShareParticipants.map((function(e){var i,n,a,s=(0,l.f)(e.name);return(0,u.h)("dyte-button",{title:"".concat(s,"'s Screen Share"),key:e.id,kind:"icon",iconPack:t.iconPack,t:t.t,class:{tab:!0,active:"screenshare"===(null===(i=t.activeTab)||void 0===i?void 0:i.type)&&(null===(n=t.activeTab)||void 0===n?void 0:n.participant.id)===e.id},onClick:function(){return t.setActiveTab({type:"screenshare",participant:e})}},(0,u.h)("div",{class:"center"},(0,u.h)("dyte-icon",{icon:t.iconPack.share_screen_person,iconPack:t.iconPack,t:t.t}),(0,u.h)("span",{class:"name"},e.id===(null===(a=t.meeting)||void 0===a?void 0:a.self.id)?t.t("You"):(0,l.s)(s,6))))})),this.plugins.map((function(e){var i,n;return(0,u.h)("dyte-button",{title:e.name,key:e.id,kind:"icon",iconPack:t.iconPack,t:t.t,class:{tab:!0,active:"plugin"===(null===(i=t.activeTab)||void 0===i?void 0:i.type)&&(null===(n=t.activeTab)||void 0===n?void 0:n.plugin.id)===e.id},onClick:function(){return t.setActiveTab({type:"plugin",plugin:e})}},(0,u.h)("div",{class:"center col"},(0,u.h)("img",{src:e.picture}),(0,u.h)("span",{class:"name"},(0,l.s)(e.name,6))))}))),(0,u.h)("div",{id:"tabs",key:"tabs"},this.screenShareParticipants.map((function(i){var n,a;return(0,u.h)(o.R,{element:"dyte-screenshare-view",defaults:e,props:{participant:i,key:i.id,style:{display:"screenshare"===(null===(n=t.activeTab)||void 0===n?void 0:n.type)&&(null===(a=t.activeTab)||void 0===a?void 0:a.participant.id)===i.id?"flex":"none"}},childProps:{participant:i,isScreenShare:!0},deepProps:!0})})),this.plugins.map((function(i){var n,a;return(0,u.h)(o.R,{element:"dyte-plugin-main",defaults:e,props:{plugin:i,key:i.id,style:{display:"plugin"===(null===(n=t.activeTab)||void 0===n?void 0:n.type)&&(null===(a=t.activeTab)||void 0===a?void 0:a.plugin.id)===i.id?"flex":"none"}}})})))),(0,u.h)(o.R,{element:"dyte-mixed-grid",defaults:e,childProps:{part:"participants-grid",class:"aside",participants:this.participants,pinnedParticipants:this.pinnedParticipants,screenShareParticipants:this.screenShareParticipants,plugins:this.plugins,aspectRatio:this.aspectRatio,gap:this.gap,size:"sm",layout:"row"},onlyChildren:!0}))}},{key:"host",get:function(){return(0,u.g)(this)}}],[{key:"watchers",get:function(){return{meeting:["meetingChanged"],screenShareParticipants:["screenShareParticipantsChanged"],plugins:["pluginsChanged"]}}}]),t}();d.style=":host{display:block;height:100%;width:100%;font-family:var(--dyte-font-family, sans-serif);display:flex}main{display:flex;padding-left:var(--dyte-space-4, 16px);flex:6}:host([layout='column']) main{padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}main #switcher{margin-right:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;height:100%;width:var(--dyte-space-16, 64px);flex-direction:column}main #tabs{height:100%;flex:1 1 0%}dyte-button{z-index:10}.aside{width:66.666667%;max-width:400px;flex:6}.col{display:flex;flex-direction:column}.tab{display:flex;height:var(--dyte-space-16, 64px);width:var(--dyte-space-16, 64px);align-items:center;justify-content:center;margin-bottom:var(--dyte-space-2, 8px);font-size:12px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}.tab.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}.tab img{height:var(--dyte-space-7, 28px);width:var(--dyte-space-7, 28px);border-radius:var(--dyte-border-radius-sm, 4px)}@media (orientation: portrait){:host{flex-direction:column}:host .aside{width:100%;max-width:100%;flex:1 1 0%}:host main{height:50%;flex:none;flex-direction:column-reverse;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host #switcher{margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host #tabs{flex:1 1 0%}:host .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}}:host([size='sm']){flex-direction:column}:host([size='sm']) .aside{width:100%;max-width:100%}:host([size='sm']) main{height:50%;flex:none;flex-direction:column-reverse;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) #switcher{margin-top:var(--dyte-space-4, 16px);height:var(--dyte-space-16, 64px);width:100%;flex-direction:row}:host([size='sm']) #tabs{flex:1 1 0%}:host([size='sm']) .tab{margin:var(--dyte-space-0, 0px);margin-right:var(--dyte-space-2, 8px)}:host([layout='column']){flex-direction:column}:host([layout='column']) main{flex:4}:host([layout='column']) .aside{flex:2;max-width:100%;width:100%}"},222:function(t,e,i){i.d(e,{R:function(){return c}});var n=i(885),a=i(2982),u=i(7762),s=i(325),r=function(t){var e=t.elements,i=t.defaults,n=t.props,a=void 0===n?{}:n,u=t.deepProps,r=void 0!==u&&u,o=t.elementProps,l=void 0===o?{}:o;return Array.isArray(e)&&0!==e.length?e.map((function(t){return(0,s.h)(c,{element:t,defaults:i,props:a,childProps:r&&a,elementProps:l})})):null},c=function(t,e){var i,c,o=t.element,l=t.defaults,d=t.childProps,p=void 0===d?{}:d,h=t.props,v=void 0===h?{}:h,D=t.onlyChildren,g=void 0!==D&&D,f=t.asHost,y=void 0!==f&&f,m=t.deepProps,b=void 0!==m&&m,E=t.elementProps,F=void 0===E?{}:E,x=l.config,A=l.size,C=l.states,k={};if(Array.isArray(o)){var P=(0,n.Z)(o,2);c=P[0],k=P[1]}else c=o;var T=null===(i=null===x||void 0===x?void 0:x.root)||void 0===i?void 0:i[c];null!=T&&"props"in T&&(v=Object.assign(Object.assign({},T.props),v)),v=Object.assign(Object.assign({},v),k),c in F&&(v=Object.assign(Object.assign({},v),F[c]));var w=function(t){var e=t.element,i=t.size,n=t.states,s=void 0===n?{}:n,r=t.config,c=void 0===r?{}:r,o=[],l=null===c||void 0===c?void 0:c.root[e],d=function(t){o.push(t),"string"===typeof i&&o.push("".concat(t,".").concat(i))};if(d(e),"object"===typeof l&&!Array.isArray(l)&&null!==l){var p=l.state,h=l.states,v=e,D=[];if(Array.isArray(h)){D=h.filter((function(t){return s[t]})),D.sort();var g,f=(0,u.Z)(D);try{for(f.s();!(g=f.n()).done;){var y=g.value;d("".concat(v,".").concat(y))}}catch(x){f.e(x)}finally{f.f()}D.length>1&&d([v].concat((0,a.Z)(D)).join("."))}if("string"===typeof p){var m="".concat(e,"[").concat(p,"=").concat(s[p],"]");d(m);var b,E=(0,u.Z)(D);try{for(E.s();!(b=E.n()).done;){var F=b.value;d("".concat(m,".").concat(F))}}catch(x){E.e(x)}finally{E.f()}D.length>1&&d([m].concat((0,a.Z)(D)).join("."))}}return o}({element:c,size:A,states:C,config:x}),B=function(t){var e=t.selectors,i=t.root;if(!Array.isArray(e)||null==i)return[];for(var n=e.length-1;n>=0;n--){var a=i[e[n]];if(Array.isArray(a))return a;if(Array.isArray(null===a||void 0===a?void 0:a.children))return a.children}return[]}({selectors:w,root:x.root});if(g)return(0,s.h)(r,{elements:B,defaults:l,props:p,deepProps:b,elementProps:F});var S=function(t){var e=t.selectors,i=t.styles;if(!Array.isArray(e)||null==i)return{};var n,a={},s=(0,u.Z)(e);try{for(s.s();!(n=s.n()).done;){var r=i[n.value];null!=r&&Object.assign(a,r)}}catch(c){s.e(c)}finally{s.f()}return a}({selectors:w,styles:x.styles});if(y)return(0,s.h)(s.H,Object.assign({},l,{style:S},v),(0,s.h)(r,{elements:B,defaults:l,props:p,deepProps:b,elementProps:F}),e);if(["dyte-header","dyte-controlbar"].includes(c)&&(v.disableRender=!0),c.startsWith("dyte-"))return(0,s.h)(c,Object.assign({},l,{style:S},v),(0,s.h)(r,{elements:B,defaults:l,props:p,deepProps:b,elementProps:F}),e);var j=c.split("#"),z=(0,n.Z)(j,2),Z=z[0],O=z[1];return(0,s.h)(Z,{id:O,style:S},(0,s.h)(r,{elements:B,defaults:l,props:p,deepProps:b,elementProps:F}),e)}},859:function(t,e,i){i.d(e,{g:function(){return s},u:function(){return r}});var n=i(4165),a=i(5861),u=i(7239),s=function(){var t=(0,a.Z)((0,n.Z)().mark((function t(e){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e&&"en"!==e&&""!==e.trim()){t.next=2;break}return t.abrupt("return",u.a);case 2:return t.prev=2,t.next=5,fetch("".concat("http://localhost:5000","/").concat(e,".json"));case 5:if((i=t.sent).ok){t.next=8;break}return t.abrupt("return",u.a);case 8:return t.t0=Object,t.t1={},t.t2=u.a,t.next=13,i.json();case 13:return t.t3=t.sent,t.abrupt("return",t.t0.assign.call(t.t0,t.t1,t.t2,t.t3));case 17:return t.prev=17,t.t4=t.catch(2),t.abrupt("return",u.a);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.a;return function(e){var i;return null!==(i=t[e])&&void 0!==i?i:e}}},9013:function(t,e,i){i.d(e,{a:function(){return u},f:function(){return s},g:function(){return r},h:function(){return a},s:function(){return n}});var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return null==t?"":t.length>e?"".concat(t.substring(0,e),"..."):t},a=function(t){return/^(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])+$/.test(t)&&!/^\d+$/.test(t)},u=function(t){return(null===t||void 0===t?void 0:t.trim().toLowerCase().startsWith("javascript:"))?"https://dyte.io":t},s=function(t){return""===(t=null===t||void 0===t?void 0:t.trim())?"Participant":t};function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,e).map((function(t){return t.charAt(0)})).join("").toUpperCase()}}}]);
//# sourceMappingURL=5288.9e765e30.chunk.js.map