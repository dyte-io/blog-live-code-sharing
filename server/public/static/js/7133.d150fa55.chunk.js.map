{"version":3,"file":"static/js/7133.d150fa55.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-participants-audio.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/index-2b010b0f.js"],"sourcesContent":["import { r as registerInstance, h, H as Host } from './index-60449c9e.js';\nimport { l as logger } from './logger-8eaa31ac.js';\nimport { u as useLanguage } from './index-2b010b0f.js';\nimport { d as defaultIconPack } from './default-language-95a0d199.js';\n\n/**\n * Handles audio from participants in a meeting\n */\nclass DyteAudio {\n  constructor() {\n    this.audio = document.createElement('audio');\n    this.audio.autoplay = true;\n    this.audioStream = new MediaStream();\n    this.audio.srcObject = this.audioStream;\n    this.audioTracks = [];\n  }\n  addTrack(id, track) {\n    if (!this.audioTracks.some((a) => a.id === id)) {\n      this.audioTracks.push({ id, track });\n      this.audioStream.addTrack(track);\n      this.play();\n    }\n  }\n  removeTrack(id) {\n    const track = this.audioTracks.find((a) => a.id === id);\n    if (track != null) {\n      this.audioStream.removeTrack(track.track);\n      this.audioTracks = this.audioTracks.filter((a) => a.id !== id);\n    }\n  }\n  async play() {\n    var _a;\n    this.audio.srcObject = this.audioStream;\n    await ((_a = this.audio.play()) === null || _a === void 0 ? void 0 : _a.catch((err) => {\n      if (err.name === 'NotAllowedError') {\n        if (this._onError != null) {\n          this._onError();\n        }\n      }\n      else if (err.name !== 'AbortError') {\n        logger.error('[dyte-audio] play() error\\n', err);\n      }\n    }));\n  }\n  async setDevice(id) {\n    var _a, _b, _c;\n    await ((_c = (_b = (_a = this.audio).setSinkId) === null || _b === void 0 ? void 0 : _b.call(_a, id)) === null || _c === void 0 ? void 0 : _c.catch((err) => {\n      logger.error('[dyte-audio] setSinkId() error\\n', err);\n    }));\n  }\n  onError(onError) {\n    this._onError = onError;\n  }\n}\n\nconst dyteParticipantsAudioCss = \":host{display:block;font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.modal{box-sizing:border-box;width:100%;max-width:var(--dyte-space-96, 384px);padding:var(--dyte-space-4, 16px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity))}.modal h3{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);font-size:24px;font-weight:500}.modal p{margin-top:var(--dyte-space-4, 16px);margin-bottom:var(--dyte-space-6, 24px)}.modal dyte-button{width:100%}\";\n\nconst DyteParticipantsAudio = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.meeting = undefined;\n    this.iconPack = defaultIconPack;\n    this.t = useLanguage();\n    this.showPlayDialog = false;\n  }\n  componentDidLoad() {\n    this.meetingChanged(this.meeting);\n  }\n  disconnectedCallback() {\n    if (this.meeting == null)\n      return;\n    this.audioUpdateListener &&\n      this.meeting.participants.active.removeListener('audioUpdate', this.audioUpdateListener);\n    this.screenShareUpdateListener &&\n      this.meeting.participants.joined.removeListener('screenShareUpdate', this.screenShareUpdateListener);\n    this.participantLeftListener &&\n      this.meeting.participants.joined.removeListener('participantLeft', this.participantLeftListener);\n    this.deviceUpdateListener &&\n      this.meeting.self.removeListener('deviceUpdate', this.deviceUpdateListener);\n  }\n  async meetingChanged(meeting) {\n    if (meeting != null) {\n      this.audio = new DyteAudio();\n      this.audio.onError(() => {\n        this.showPlayDialog = true;\n      });\n      this.audio.play();\n      const currentDevices = meeting.self.getCurrentDevices();\n      if (currentDevices.speaker != null) {\n        await this.audio.setDevice(currentDevices.speaker.deviceId);\n      }\n      this.audioUpdateListener = ({ id, audioEnabled, audioTrack }) => {\n        const audioId = `audio-${id}`;\n        if (audioEnabled && audioTrack != null) {\n          this.audio.addTrack(audioId, audioTrack);\n        }\n        else {\n          this.audio.removeTrack(audioId);\n        }\n      };\n      {\n        const participants = meeting.participants.joined.toArray();\n        for (const participant of participants) {\n          this.audioUpdateListener(participant);\n        }\n      }\n      this.participantLeftListener = ({ id }) => {\n        this.audio.removeTrack(`audio-${id}`);\n        this.audio.removeTrack(`screenshare-${id}`);\n      };\n      this.screenShareUpdateListener = ({ id, screenShareEnabled, screenShareTracks }) => {\n        const audioId = `screenshare-${id}`;\n        if (screenShareEnabled && screenShareTracks.audio != null) {\n          this.audio.addTrack(audioId, screenShareTracks.audio);\n        }\n        else {\n          this.audio.removeTrack(audioId);\n        }\n      };\n      this.deviceUpdateListener = ({ device, preview }) => {\n        if (preview)\n          return;\n        if (device.kind === 'audiooutput') {\n          this.audio.setDevice(device.deviceId);\n        }\n      };\n      meeting.participants.joined.addListener('audioUpdate', this.audioUpdateListener);\n      meeting.participants.joined.addListener('screenShareUpdate', this.screenShareUpdateListener);\n      meeting.participants.joined.addListener('participantLeft', this.participantLeftListener);\n      meeting.self.addListener('deviceUpdate', this.deviceUpdateListener);\n    }\n  }\n  render() {\n    return (h(Host, null, this.showPlayDialog && (h(\"dyte-dialog\", { open: true, onDyteDialogClose: () => {\n        this.showPlayDialog = false;\n      }, iconPack: this.iconPack, t: this.t }, h(\"div\", { class: \"modal\" }, h(\"h3\", null, this.t('Allow Audio Playback')), h(\"p\", null, this.t('In order to play audio properly on your device, click the button below')), h(\"dyte-button\", { kind: \"wide\", onClick: () => {\n        this.audio.play();\n        this.showPlayDialog = false;\n      }, title: this.t('Play Audio'), iconPack: this.iconPack, t: this.t }, this.t('Play Audio')))))));\n  }\n  static get watchers() { return {\n    \"meeting\": [\"meetingChanged\"]\n  }; }\n};\nDyteParticipantsAudio.style = dyteParticipantsAudioCss;\n\nexport { DyteParticipantsAudio as dyte_participants_audio };\n","import { a as defaultLanguage } from './default-language-95a0d199.js';\n\n// Replace with cdn base path in prod\nconst LANG_BASE_URL = 'http://localhost:5000';\nconst getLangData = async (lang) => {\n  if (lang == null || lang === 'en' || lang.trim() === '') {\n    return defaultLanguage;\n  }\n  try {\n    const res = await fetch(`${LANG_BASE_URL}/${lang}.json`);\n    if (!res.ok) {\n      return defaultLanguage;\n    }\n    // merge fetched language with defaultLanguage to avoid empty properties\n    return Object.assign({}, defaultLanguage, await res.json());\n  }\n  catch (_) {\n    return defaultLanguage;\n  }\n};\n/**\n * Creates an i18n instance from a language dictionary/object.\n * @param lang The language dictionary\n * @returns A function which handles i18n\n */\nconst useLanguage = (lang = defaultLanguage) => {\n  return (key) => {\n    var _a;\n    return (_a = lang[key]) !== null && _a !== void 0 ? _a : key;\n  };\n};\n\nexport { getLangData as g, useLanguage as u };\n"],"names":["DyteAudio","_classCallCheck","this","audio","document","createElement","autoplay","audioStream","MediaStream","srcObject","audioTracks","_createClass","key","value","id","track","some","a","push","addTrack","play","find","removeTrack","filter","_play","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_a","_this","wrap","_context","prev","next","catch","err","name","_onError","logger","stop","apply","arguments","_setDevice","_callee2","_b","_c","_context2","setSinkId","call","_x","onError","DyteParticipantsAudio","hostRef","registerInstance","meeting","undefined","iconPack","defaultIconPack","t","useLanguage","showPlayDialog","meetingChanged","audioUpdateListener","participants","active","removeListener","screenShareUpdateListener","joined","participantLeftListener","deviceUpdateListener","self","_meetingChanged","_callee3","currentDevices","_iterator","_step","participant","_this2","_context3","getCurrentDevices","speaker","setDevice","deviceId","_ref","audioEnabled","audioTrack","audioId","concat","toArray","_createForOfIteratorHelper","s","n","done","e","f","_ref2","_ref3","screenShareEnabled","screenShareTracks","_ref4","device","preview","kind","addListener","_x2","_this3","h","Host","open","onDyteDialogClose","class","onClick","title","get","style","getLangData","lang","res","trim","abrupt","defaultLanguage","fetch","sent","ok","t0","Object","t1","t2","json","t3","assign","t4","length"],"sourceRoot":""}