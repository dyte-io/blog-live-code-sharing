"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[3012],{3012:function(t,e,i){i.r(e),i.d(e,{dyte_settings:function(){return d}});var n=i(5671),o=i(3144),r=i(325),s=i(7239),a=i(859),c=i(5100),d=function(){function t(e){var i=this;(0,n.Z)(this,t),(0,r.r)(this,e),this.stateUpdate=(0,r.c)(this,"dyteStateUpdate",7),this.keyPressListener=function(t){"Escape"===t.key&&i.close()},this.selfJoinStageListener=function(){i.updateCanProduce(i.meeting)},this.selfStageLeftListener=function(){i.canProduceAudio=!1,i.canProduceVideo=!1},this.selfJoinStageRejectedListener=function(){i.updateCanProduce(i.meeting)},this.meeting=void 0,this.states=void 0,this.size=void 0,this.iconPack=s.d,this.t=(0,a.u)(),this.activeTab="connection",this.isMobileMainVisible=!1,this.networkStatus="good",this.canProduceAudio=!1,this.canProduceVideo=!1}return(0,o.Z)(t,[{key:"connectedCallback",value:function(){document.addEventListener("keydown",this.keyPressListener),this.meetingChanged(this.meeting)}},{key:"disconnectedCallback",value:function(){var t,e,i,n,o,r;this.keyPressListener&&document.removeEventListener("keydown",this.keyPressListener),this.poorConnectionListener&&(null===(t=this.meeting)||void 0===t||t.meta.removeListener("poorConnection",this.poorConnectionListener)),this.selfJoinStageListener&&(null===(e=this.meeting)||void 0===e||e.self.removeListener("joinStageRequestAccepted",this.selfJoinStageListener)),this.selfJoinStageRejectedListener&&(null===(i=this.meeting)||void 0===i||i.self.removeListener("joinStageRequestRejected",this.selfJoinStageRejectedListener)),this.selfJoinStageListener&&(null===(n=this.meeting)||void 0===n||n.self.removeListener("stageJoined",this.selfJoinStageListener)),this.selfStageLeftListener&&(null===(o=this.meeting)||void 0===o||o.self.removeListener("stageLeft",this.selfStageLeftListener)),this.selfJoinStageListener&&(null===(r=this.meeting)||void 0===r||r.self.removeListener("removedFromStage",this.selfJoinStageListener))}},{key:"meetingChanged",value:function(t){var e=this;null!=t&&(this.updateCanProduce(t),this.canProduceAudio||this.canProduceVideo?this.canProduceAudio?this.activeTab="audio":this.activeTab="video":this.activeTab="connection",this.poorConnectionListener=function(t){var i=t.score;i<7?e.networkStatus="poor":i<4&&(e.networkStatus="poorest"),setTimeout((function(){e.networkStatus="good"}),5e3)},t.meta.addListener("poorConnection",this.poorConnectionListener),t.self.addListener("joinStageRequestAccepted",this.selfJoinStageListener),t.self.addListener("joinStageRequestRejected",this.selfJoinStageRejectedListener),t.self.addListener("stageJoined",this.selfJoinStageListener),t.self.addListener("stageLeft",this.selfStageLeftListener),t.self.addListener("removedFromStage",this.selfJoinStageListener))}},{key:"updateCanProduce",value:function(t){var e=t.self,i=t.meta,n="ALLOWED"===e.permissions.canProduceAudio,o="ALLOWED"===e.permissions.canProduceVideo;if("WEBINAR"===i.viewType){var r="CAN_REQUEST"===e.permissions.canProduceAudio,s="CAN_REQUEST"===e.permissions.canProduceVideo;(n||r&&("ON_STAGE"===e.webinarStageStatus||"ACCEPTED_TO_JOIN_STAGE"===e.webinarStageStatus))&&(this.canProduceAudio=!0),(o||s&&("ON_STAGE"===e.webinarStageStatus||"ACCEPTED_TO_JOIN_STAGE"===e.webinarStageStatus))&&(this.canProduceVideo=!0)}else this.canProduceAudio=n,this.canProduceVideo=o}},{key:"changeTab",value:function(t){this.activeTab=t,"sm"===this.size&&(this.isMobileMainVisible||(this.isMobileMainVisible=!0))}},{key:"close",value:function(){this.stateUpdate.emit({activeSettings:!1}),c.s.activeSettings=!1}},{key:"render",value:function(){var t=this;if(null==this.meeting)return null;var e={meeting:this.meeting,states:this.states||c.s,iconPack:this.iconPack,t:this.t};return(0,r.h)(r.H,null,(0,r.h)("aside",{class:{hide:this.isMobileMainVisible},part:"menu"},(0,r.h)("header",null,(0,r.h)("h2",null,this.t("settings"))),this.canProduceAudio&&(0,r.h)("button",{type:"button",class:{active:"audio"===this.activeTab},onClick:function(){return t.changeTab("audio")}},this.t("audio"),(0,r.h)("div",{class:"right"},(0,r.h)("dyte-icon",{icon:this.iconPack.mic_on,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&(0,r.h)("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),this.canProduceVideo&&(0,r.h)("button",{type:"button",class:{active:"video"===this.activeTab},onClick:function(){return t.changeTab("video")}},this.t("video"),(0,r.h)("div",{class:"right"},(0,r.h)("dyte-icon",{icon:this.iconPack.video_on,iconPack:this.iconPack,t:this.t}),"sm"===this.size&&(0,r.h)("dyte-icon",{icon:this.iconPack.chevron_right,iconPack:this.iconPack,t:this.t}))),(0,r.h)("button",{type:"none",title:"Your network condition is ".concat(this.networkStatus)},this.t("connection"),(0,r.h)("div",{class:"right"},(0,r.h)("dyte-icon",{icon:this.iconPack.wifi,class:this.networkStatus,iconPack:this.iconPack,t:this.t})))),(0,r.h)("main",{class:{active:this.isMobileMainVisible},part:"main-content"},"sm"===this.size&&(0,r.h)("header",null,(0,r.h)("dyte-button",{kind:"icon",class:"back-btn",onClick:function(){return t.isMobileMainVisible=!1},iconPack:this.iconPack,t:this.t},(0,r.h)("dyte-icon",{icon:this.iconPack.chevron_left,iconPack:this.iconPack,t:this.t})),(0,r.h)("h2",null,this.t("audio"===this.activeTab?"audio":"video"))),"audio"===this.activeTab&&(0,r.h)("dyte-settings-audio",Object.assign({},e)),"video"===this.activeTab&&(0,r.h)("dyte-settings-video",Object.assign({},e))))}}],[{key:"watchers",get:function(){return{meeting:["meetingChanged"]}}}]),t}();d.style=":host{position:relative;display:flex;overflow:hidden;border-radius:var(--dyte-border-radius-md, 8px);width:100%;font-family:var(--dyte-font-family, sans-serif);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;align-items:center;justify-content:space-between;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}button{font-family:var(--dyte-font-family, sans-serif)}.title{font-size:20px;line-height:1}.back-btn,.dismiss-btn{border-radius:var(--dyte-border-radius-sm, 4px);background-color:transparent;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.back-btn:hover,.dismiss-btn:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside{box-sizing:border-box;display:flex;min-width:var(--dyte-space-56, 224px);flex-direction:column;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));padding-left:var(--dyte-space-2, 8px)}aside button{margin-top:var(--dyte-space-4, 16px);box-sizing:border-box;display:flex;width:100%;align-items:center;justify-content:space-between;border-top-left-radius:var(--dyte-border-radius-sm, 4px);border-bottom-left-radius:var(--dyte-border-radius-sm, 4px);padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px);padding-top:var(--dyte-space-3, 12px);padding-bottom:var(--dyte-space-3, 12px);background-color:transparent;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));cursor:default;font-size:16px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px}aside button .right{display:flex;align-items:center}aside button .right dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}aside button .right dyte-icon:last-child{margin-left:var(--dyte-space-4, 16px)}aside button[type='button']{cursor:pointer;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}aside button[type='button']:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}aside button[type='button']{border-right:var(--dyte-border-width-md, 2px) solid transparent}aside button.active{--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-border-opacity));background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}aside button.active:hover{background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / 0.2)}dyte-icon.poor{--tw-text-opacity:1;color:rgba(var(--dyte-colors-warning, 255 205 7) / var(--tw-text-opacity))}dyte-icon.poorest{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.good{--tw-text-opacity:1;color:rgba(var(--dyte-colors-success, 98 165 4) / var(--tw-text-opacity))}main{display:flex;flex:1 1 0%;align-items:center;justify-content:center;padding-left:var(--dyte-space-6, 24px);padding-right:var(--dyte-space-6, 24px);box-sizing:border-box;width:100%}.dismiss-btn{position:absolute;top:var(--dyte-space-3, 12px);right:var(--dyte-space-3, 12px);height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}:host([size='sm']) aside{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity))}:host([size='sm']) .dismiss-btn{top:var(--dyte-space-5, 20px);right:var(--dyte-space-4, 16px)}:host([size='sm']) aside{width:100%;padding-left:var(--dyte-space-0, 0px)}:host([size='sm']) aside button{border-radius:var(--dyte-border-radius-none, 0)}:host([size='sm']) aside button.active{border-width:var(--dyte-border-width-none, 0);border-style:none;background-color:transparent}:host([size='sm']) aside button.active:hover{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}:host([size='sm']) aside.hide{display:none}:host([size='sm']) main{display:none;padding-left:var(--dyte-space-4, 16px);padding-right:var(--dyte-space-4, 16px)}:host([size='sm']) main header{justify-content:center}:host([size='sm']) main header dyte-button{position:absolute;left:var(--dyte-space-4, 16px)}:host([size='sm']) main.active{display:block}"},859:function(t,e,i){i.d(e,{g:function(){return s},u:function(){return a}});var n=i(4165),o=i(5861),r=i(7239),s=function(){var t=(0,o.Z)((0,n.Z)().mark((function t(e){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e&&"en"!==e&&""!==e.trim()){t.next=2;break}return t.abrupt("return",r.a);case 2:return t.prev=2,t.next=5,fetch("".concat("http://localhost:5000","/").concat(e,".json"));case 5:if((i=t.sent).ok){t.next=8;break}return t.abrupt("return",r.a);case 8:return t.t0=Object,t.t1={},t.t2=r.a,t.next=13,i.json();case 13:return t.t3=t.sent,t.abrupt("return",t.t0.assign.call(t.t0,t.t1,t.t2,t.t3));case 17:return t.prev=17,t.t4=t.catch(2),t.abrupt("return",r.a);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a;return function(e){var i;return null!==(i=t[e])&&void 0!==i?i:e}}},5100:function(t,e,i){i.d(e,{o:function(){return h},s:function(){return u}});var n=i(7762),o=i(325),r=function(t){return!("isConnected"in t)||t.isConnected},s=function(t,e){var i;return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];i&&clearTimeout(i),i=setTimeout((function(){i=0,t.apply(void 0,o)}),e)}}((function(t){var e,i=(0,n.Z)(t.keys());try{for(i.s();!(e=i.n()).done;){var o=e.value;t.set(o,t.get(o).filter(r))}}catch(s){i.e(s)}finally{i.f()}}),2e3),a=function(t){return"function"===typeof t?t():t},c=function(t,e){var i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.length--)},d=function(t,e){var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return t!==e},i=a(t),n=new Map(Object.entries(null!==i&&void 0!==i?i:{})),o={dispose:[],get:[],set:[],reset:[]},r=function(){var e;n=new Map(Object.entries(null!==(e=a(t))&&void 0!==e?e:{})),o.reset.forEach((function(t){return t()}))},s=function(t){return o.get.forEach((function(e){return e(t)})),n.get(t)},d=function(t,i){var r=n.get(t);e(i,r,t)&&(n.set(t,i),o.set.forEach((function(e){return e(t,i,r)})))},u="undefined"===typeof Proxy?{}:new Proxy(i,{get:function(t,e){return s(e)},ownKeys:function(t){return Array.from(n.keys())},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0}},has:function(t,e){return n.has(e)},set:function(t,e,i){return d(e,i),!0}}),h=function(t,e){return o[t].push(e),function(){c(o[t],e)}};return{state:u,get:s,set:d,on:h,onChange:function(e,i){var n=h("set",(function(t,n){t===e&&i(n)})),o=h("reset",(function(){return i(a(t)[e])}));return function(){n(),o()}},use:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.reduce((function(t,e){return e.set&&t.push(h("set",e.set)),e.get&&t.push(h("get",e.get)),e.reset&&t.push(h("reset",e.reset)),e.dispose&&t.push(h("dispose",e.dispose)),t}),[]);return function(){return n.forEach((function(t){return t()}))}},dispose:function(){o.dispose.forEach((function(t){return t()})),r()},reset:r,forceUpdate:function(t){var e=n.get(t);o.set.forEach((function(i){return i(t,e,e)}))}}}(t,e);return i.use(function(){if("function"!==typeof o.a)return{};var t=new Map;return{dispose:function(){return t.clear()},get:function(e){var i=(0,o.a)();i&&function(t,e,i){var n=t.get(e);n?n.includes(i)||n.push(i):t.set(e,[i])}(t,e,i)},set:function(e){var i=t.get(e);i&&t.set(e,i.filter(o.f)),s(t)},reset:function(){t.forEach((function(t){return t.forEach(o.f)})),s(t)}}}()),i}({}),u=d.state,h=d.onChange}}]);
//# sourceMappingURL=3012.fb76b76c.chunk.js.map