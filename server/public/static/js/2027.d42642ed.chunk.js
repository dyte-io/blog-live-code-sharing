"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2027],{2027:function(t,r,o){o.r(r),o.d(r,{dyte_poll:function(){return l},dyte_poll_form:function(){return d}});var e=o(2982),u=o(5671),n=o(3144),a=o(325),i=o(7239),s=o(859),c=o(9013),l=function(){function t(r){(0,u.Z)(this,t),(0,a.r)(this,r),this.onVote=(0,a.c)(this,"dyteVotePoll",7),this.poll=void 0,this.self=void 0,this.permissions=void 0,this.iconPack=i.d,this.t=(0,s.u)()}return(0,n.Z)(t,[{key:"vote",value:function(t,r){this.poll.voted.includes(this.self)?t.preventDefault():this.onVote.emit({id:this.poll.id,index:r})}},{key:"render",value:function(){var t=this;return(0,a.h)(a.H,null,(0,a.h)("div",{class:"ctr"},(0,a.h)("p",{class:"poll-title"},this.t("Poll by")," ",(0,c.s)((0,c.f)(this.poll.createdBy),20)),(0,a.h)("div",{class:"poll"},(0,a.h)("p",{class:"poll-question"},this.poll.question),this.poll.options.map((function(r,o){return(0,a.h)("div",{class:{active:r.votes.some((function(r){return r.id===t.self})),"poll-option":!0}},(0,a.h)("div",{class:"poll-option-header"},(0,a.h)("label",null,(0,a.h)("input",{disabled:!t.permissions.polls.canVote,type:"checkbox",checked:r.votes.some((function(r){return r.id===t.self})),onClick:function(r){return t.vote(r,o)}}),(0,a.h)("p",null,r.text," (",r.count,")"))),(0,a.h)("div",{class:"votes"},r.votes.map((function(r){if(!t.poll.anonymous||t.self===t.poll.createdByUserId)return(0,a.h)("dyte-tooltip",{label:r.name,iconPack:t.iconPack,t:t.t},(0,a.h)("div",{class:"vote"},(0,c.g)(r.name)))}))))})))))}}]),t}();l.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.ctr{margin-bottom:var(--dyte-space-3, 12px);display:flex;width:83.333333%;flex-direction:column;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}.poll-title{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);margin-right:var(--dyte-space-4, 16px);font-size:12px;font-weight:700}.poll{border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity));display:flex;flex-direction:column;padding:var(--dyte-space-3, 12px)}.poll p{margin:var(--dyte-space-0, 0px)}.poll-question{font-size:12px;font-weight:700;overflow-wrap:break-word}.poll-option{display:flex;flex-direction:column;margin-top:var(--dyte-space-2, 8px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-600, 60 60 60) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px);word-break:break-word}.poll-option label{display:flex;flex-direction:row}.poll-option-header{display:flex;flex-direction:row;justify-content:space-between}.votes{margin-top:var(--dyte-space-1, 4px);display:flex;flex-direction:row;flex-wrap:wrap}.vote{margin-right:var(--dyte-space-1, 4px);height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);display:flex;align-items:center;justify-content:center;border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));border-radius:var(--dyte-border-radius-none, 0);-webkit-clip-path:circle();clip-path:circle()}.active{--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity))}";var d=function(){function t(r){(0,u.Z)(this,t),(0,a.r)(this,r),this.onCreate=(0,a.c)(this,"dyteCreatePoll",7),this.iconPack=i.d,this.t=(0,s.u)(),this.options=["",""],this.anonymous=!1,this.hideVotes=!0,this.error=void 0}return(0,n.Z)(t,[{key:"removeOption",value:function(t){var r;this.options=this.options.filter((function(r,o){return o!==t})),1===(null===(r=this.error)||void 0===r?void 0:r.code)&&(this.error=void 0)}},{key:"addOption",value:function(){this.options=[].concat((0,e.Z)(this.options),[""])}},{key:"updateOption",value:function(t,r){var o;this.options[r]=t.target.value,1===(null===(o=this.error)||void 0===o?void 0:o.code)&&(this.error=void 0)}},{key:"handleSubmit",value:function(){var t={question:this.question.value,options:this.options,anonymous:this.anonymous,hideVotes:!!this.anonymous||this.hideVotes};t.question?this.options.filter((function(t){return""===t.trim()})).length>0?this.error={code:1,message:this.t("Empty options not allowed.")}:this.onCreate.emit(t):this.error={code:0,message:this.t("Question is required.")}}},{key:"render",value:function(){var t=this;return(0,a.h)(a.H,null,(0,a.h)("div",{class:"create-poll"},(0,a.h)("p",null,this.t("Poll Question")),(0,a.h)("textarea",{onInput:function(){t.error&&0===t.error.code&&(t.error=void 0)},ref:function(r){return t.question=r},placeholder:this.t("What is your poll for?")}),this.options.map((function(r,o){return(0,a.h)("div",{class:"option"},(0,a.h)("input",{placeholder:t.t("Enter an option"),value:r,onInput:function(r){return t.updateOption(r,o)}}),o>1&&(0,a.h)("dyte-button",{kind:"icon",class:"auto remove-option",variant:"secondary",onClick:function(){return t.removeOption(o)},iconPack:t.iconPack,t:t.t},(0,a.h)("dyte-icon",{icon:t.iconPack.subtract,iconPack:t.iconPack,t:t.t})))})),(0,a.h)("dyte-button",{class:"add-option",variant:"secondary",onClick:function(){return t.addOption()},iconPack:this.iconPack,t:this.t},this.t("Add an option")),(0,a.h)("label",null,(0,a.h)("input",{id:"anonymous",type:"checkbox",onChange:function(r){return t.anonymous=r.target.checked}}),this.t("Anonymous")),(0,a.h)("label",null,(0,a.h)("input",{id:"hideVotes",type:"checkbox",disabled:this.anonymous,checked:!!this.anonymous||this.hideVotes,onChange:function(r){return t.hideVotes=r.target.checked}}),this.t("Hide results before voting")),(0,a.h)("dyte-button",{kind:"wide",onClick:function(){return t.handleSubmit()},iconPack:this.iconPack,t:this.t},this.t("Create Poll")),this.error&&(0,a.h)("span",{class:"error-text"},this.error.message)))}}]),t}();d.style=".scrollbar{scrollbar-width:thin;scrollbar-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))\n    var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar{height:var(--dyte-space-1\\.5, 6px);width:var(--dyte-space-1\\.5, 6px);border-radius:9999px;background-color:var(--dyte-scrollbar-background, transparent)}.scrollbar::-webkit-scrollbar-thumb{border-radius:9999px;background-color:var(--dyte-scrollbar-color, rgb(var(--dyte-colors-background-600, 60 60 60)))}.create-poll{margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);display:flex;flex:1 1 0%;flex-direction:column;padding:var(--dyte-space-3, 12px);border-radius:var(--dyte-border-radius-md, 8px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-700, 44 44 44) / var(--tw-bg-opacity))}input{font-family:var(--dyte-font-family, sans-serif)}.create-poll p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px);text-align:center}.create-poll textarea{display:flex;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;font-family:var(--dyte-font-family, sans-serif);font-weight:500;outline:2px solid transparent;outline-offset:2px;margin-top:var(--dyte-space-3, 12px);margin-bottom:var(--dyte-space-3, 12px);resize:vertical;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.create-poll textarea:focus{outline-style:solid;outline-offset:2px;outline-color:rgb(var(--dyte-colors-background-600, 60 60 60))}.option{display:flex;flex-direction:row;align-items:center;margin-bottom:var(--dyte-space-3, 12px);width:100%}.option input{width:100%;border-radius:var(--dyte-border-radius-sm, 4px);padding:var(--dyte-space-2, 8px);border-width:var(--dyte-border-width-none, 0);border-style:none;outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}.remove-option{margin-left:var(--dyte-space-2, 8px);width:var(--dyte-space-10, 40px);border-radius:var(--dyte-border-radius-sm, 4px)}.add-option{margin-bottom:var(--dyte-space-3, 12px)}label{margin-bottom:var(--dyte-space-3, 12px)}.error-text{margin-top:var(--dyte-space-3, 12px);text-align:center;font-size:12px;--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}"},859:function(t,r,o){o.d(r,{g:function(){return a},u:function(){return i}});var e=o(4165),u=o(5861),n=o(7239),a=function(){var t=(0,u.Z)((0,e.Z)().mark((function t(r){var o;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=r&&"en"!==r&&""!==r.trim()){t.next=2;break}return t.abrupt("return",n.a);case 2:return t.prev=2,t.next=5,fetch("".concat("http://localhost:5000","/").concat(r,".json"));case 5:if((o=t.sent).ok){t.next=8;break}return t.abrupt("return",n.a);case 8:return t.t0=Object,t.t1={},t.t2=n.a,t.next=13,o.json();case 13:return t.t3=t.sent,t.abrupt("return",t.t0.assign.call(t.t0,t.t1,t.t2,t.t3));case 17:return t.prev=17,t.t4=t.catch(2),t.abrupt("return",n.a);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(r){return t.apply(this,arguments)}}(),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.a;return function(r){var o;return null!==(o=t[r])&&void 0!==o?o:r}}},9013:function(t,r,o){o.d(r,{a:function(){return n},f:function(){return a},g:function(){return i},h:function(){return u},s:function(){return e}});var e=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return null==t?"":t.length>r?"".concat(t.substring(0,r),"..."):t},u=function(t){return/^(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])+$/.test(t)&&!/^\d+$/.test(t)},n=function(t){return(null===t||void 0===t?void 0:t.trim().toLowerCase().startsWith("javascript:"))?"https://dyte.io":t},a=function(t){return""===(t=null===t||void 0===t?void 0:t.trim())?"Participant":t};function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t.replace(/[^\u00BF-\u1FFF\u2C00-\uD7FF\w\s]/g,"").trim().split(/\s+/).slice(0,r).map((function(t){return t.charAt(0)})).join("").toUpperCase()}}}]);
//# sourceMappingURL=2027.d42642ed.chunk.js.map