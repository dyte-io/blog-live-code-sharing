{"version":3,"file":"static/js/8785.4772c13a.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-webinar-stage-toggle.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/index-2b010b0f.js","../node_modules/@dytesdk/ui-kit/dist/esm/store-183b9cab.js"],"sourcesContent":["import { r as registerInstance, h, H as Host } from './index-60449c9e.js';\nimport { d as defaultIconPack } from './default-language-95a0d199.js';\nimport { u as useLanguage } from './index-2b010b0f.js';\nimport { o as onChange } from './store-183b9cab.js';\n\nconst dyteWebinarStageToggleCss = \":host{display:block;font-family:var(--dyte-font-family, sans-serif)}\";\n\nconst DyteWebinarStageToggle = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.requestToJoinAcceptedListener = () => {\n      this.stageStatus = 'ACCEPTED';\n    };\n    this.requestToJoinRejectedListener = () => {\n      this.stageStatus = 'DENIED';\n    };\n    this.stageJoinedListener = () => {\n      this.stageStatus = 'ACCEPTED';\n    };\n    this.removeFromStageListener = () => {\n      this.stageStatus = 'NOT_REQUESTED';\n    };\n    this.selfStageLeftListener = () => {\n      this.stageStatus = 'NOT_REQUESTED';\n    };\n    this.activeJoinStageChanged = (activeJoinStage) => {\n      if (!activeJoinStage)\n        this.stageStatus = 'NOT_REQUESTED';\n    };\n    this.stageCallback = async () => {\n      var _a;\n      const self = (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.self;\n      if (self == null || (!this.requestProduce && !this.canPresent)) {\n        return;\n      }\n      if (this.stageStatus === 'ACCEPTED') {\n        await self.leaveStage();\n        this.stageStatus = 'NOT_REQUESTED';\n        return;\n      }\n      if (this.canPresent) {\n        await self.joinStage();\n        this.stageStatus = 'ACCEPTED';\n      }\n      else {\n        await self.requestToJoinStage();\n        this.stageStatus = 'PENDING';\n      }\n    };\n    this.variant = 'button';\n    this.meeting = undefined;\n    this.size = undefined;\n    this.iconPack = defaultIconPack;\n    this.t = useLanguage();\n    this.stageStatus = 'NOT_REQUESTED';\n    this.canPresent = false;\n    this.requestProduce = false;\n  }\n  connectedCallback() {\n    this.meetingChanged(this.meeting);\n    this.meeting.self.addListener('joinStageRequestAccepted', this.requestToJoinAcceptedListener);\n    this.meeting.self.addListener('joinStageRequestRejected', this.requestToJoinRejectedListener);\n    this.meeting.self.addListener('stageJoined', this.stageJoinedListener);\n    this.meeting.self.addListener('removedFromStage', this.removeFromStageListener);\n    this.meeting.self.addListener('stageLeft', this.selfStageLeftListener);\n    onChange('activeJoinStage', (activeJoinStage) => this.activeJoinStageChanged(activeJoinStage));\n  }\n  disconnectedCallback() {\n    this.meeting.self.removeListener('joinStageRequestAccepted', this.requestToJoinAcceptedListener);\n    this.meeting.self.removeListener('joinStageRequestRejected', this.requestToJoinRejectedListener);\n    this.meeting.self.removeListener('removedFromStage', this.removeFromStageListener);\n    this.meeting.self.removeListener('stageJoined', this.stageJoinedListener);\n    this.meeting.self.removeListener('stageLeft', this.selfStageLeftListener);\n  }\n  meetingChanged(meeting) {\n    if (meeting != null) {\n      this.requestProduce = meeting.self.permissions.requestProduce;\n      this.canPresent = meeting.self.permissions.canPresent;\n      if (this.canPresent || meeting.self.webinarStageStatus === 'ON_STAGE') {\n        this.stageStatus = 'ACCEPTED';\n      }\n    }\n  }\n  getState() {\n    let tooltipLabel = '';\n    let label = '';\n    let icon = '';\n    let classList = {};\n    let disabled = false;\n    if (this.stageStatus === 'PENDING') {\n      label = this.t('stage_request.approval_pending');\n      tooltipLabel = this.t('stage_request.pending_tip');\n      icon = this.iconPack.join_stage;\n      classList['red-icon'] = false;\n      disabled = true;\n    }\n    else if (this.stageStatus === 'ACCEPTED') {\n      label = this.t('stage_request.leave_stage');\n      tooltipLabel = this.t('stage_request.leave_tip');\n      icon = this.iconPack.leave_stage;\n      classList['red-icon'] = false;\n      disabled = false;\n    }\n    else if (this.stageStatus === 'DENIED') {\n      label = this.t('stage_request.denied');\n      tooltipLabel = this.t('stage_request.denied_tip');\n      icon = this.iconPack.join_stage;\n      classList['red-icon'] = false;\n      disabled = true;\n    }\n    else {\n      label = this.t('stage_request.request');\n      if (this.canPresent) {\n        tooltipLabel = this.t('stage_request.request');\n      }\n      else {\n        tooltipLabel = this.t('stage_request.request_tip');\n      }\n      icon = this.iconPack.join_stage;\n      disabled = false;\n    }\n    return { tooltipLabel, label, icon, classList, disabled };\n  }\n  render() {\n    if (!this.requestProduce && !this.canPresent) {\n      return null;\n    }\n    if (this.meeting.self.config.viewType !== 'WEBINAR') {\n      return null;\n    }\n    const { tooltipLabel, label, icon, classList, disabled } = this.getState();\n    return (h(Host, { title: label }, h(\"dyte-tooltip\", { placement: \"top\", kind: \"block\", label: tooltipLabel, delay: 600, part: \"tooltip\", iconPack: this.iconPack, t: this.t }, h(\"dyte-controlbar-button\", { part: \"controlbar-button\", size: this.size, iconPack: this.iconPack, t: this.t, variant: this.variant, label: label, icon: icon, class: classList, onClick: this.stageCallback, disabled: disabled, showWarning: false }))));\n  }\n  static get watchers() { return {\n    \"meeting\": [\"meetingChanged\"]\n  }; }\n};\nDyteWebinarStageToggle.style = dyteWebinarStageToggleCss;\n\nexport { DyteWebinarStageToggle as dyte_webinar_stage_toggle };\n","import { a as defaultLanguage } from './default-language-95a0d199.js';\n\n// Replace with cdn base path in prod\nconst LANG_BASE_URL = 'http://localhost:5000';\nconst getLangData = async (lang) => {\n  if (lang == null || lang === 'en' || lang.trim() === '') {\n    return defaultLanguage;\n  }\n  try {\n    const res = await fetch(`${LANG_BASE_URL}/${lang}.json`);\n    if (!res.ok) {\n      return defaultLanguage;\n    }\n    // merge fetched language with defaultLanguage to avoid empty properties\n    return Object.assign({}, defaultLanguage, await res.json());\n  }\n  catch (_) {\n    return defaultLanguage;\n  }\n};\n/**\n * Creates an i18n instance from a language dictionary/object.\n * @param lang The language dictionary\n * @returns A function which handles i18n\n */\nconst useLanguage = (lang = defaultLanguage) => {\n  return (key) => {\n    var _a;\n    return (_a = lang[key]) !== null && _a !== void 0 ? _a : key;\n  };\n};\n\nexport { getLangData as g, useLanguage as u };\n","import { a as getRenderingRef, f as forceUpdate } from './index-60449c9e.js';\n\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\n\n/**\n * Check if a possible element isConnected.\n * The property might not be there, so we check for it.\n *\n * We want it to return true if isConnected is not a property,\n * otherwise we would remove these elements and would not update.\n *\n * Better leak in Edge than to be useless.\n */\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        // If we are not in a stencil project, we do nothing.\n        // This function is not really exported by @stencil/core.\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\n\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        var _a;\n        // When resetting the state, the default state may be a function - unwrap it to invoke it.\n        // otherwise, the state won't be properly reset\n        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        // Call first dispose as resetting the state would\n        // cause less updates ;)\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        // We need to unwrap the defaultState because it might be a function.\n        // Otherwise we might not be sending the right reset value.\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\n\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\n\nconst { state, onChange } = createStore({});\n\nexport { onChange as o, state as s };\n"],"names":["DyteWebinarStageToggle","hostRef","_this","_classCallCheck","registerInstance","this","requestToJoinAcceptedListener","stageStatus","requestToJoinRejectedListener","stageJoinedListener","removeFromStageListener","selfStageLeftListener","activeJoinStageChanged","activeJoinStage","stageCallback","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_a","self","wrap","_context","prev","next","meeting","requestProduce","canPresent","abrupt","leaveStage","joinStage","requestToJoinStage","stop","variant","undefined","size","iconPack","defaultIconPack","t","useLanguage","_createClass","key","value","_this2","meetingChanged","addListener","onChange","removeListener","permissions","webinarStageStatus","tooltipLabel","label","icon","classList","disabled","join_stage","leave_stage","config","viewType","_this$getState","getState","h","Host","title","placement","kind","delay","part","class","onClick","showWarning","get","style","getLangData","_ref","lang","res","trim","defaultLanguage","fetch","concat","sent","ok","t0","Object","t1","t2","json","t3","assign","call","t4","_x","apply","arguments","length","isConnected","maybeElement","cleanupElements","fn","ms","timeoutId","_len","args","Array","_key","clearTimeout","setTimeout","debounce","map","_step","_iterator","_createForOfIteratorHelper","keys","s","n","done","set","filter","err","e","f","unwrap","val","removeFromArray","array","item","index","indexOf","_createStore","defaultState","shouldUpdate","a","b","unwrappedState","states","Map","entries","handlers","dispose","reset","forEach","cb","propName","oldValue","state","Proxy","_","ownKeys","from","getOwnPropertyDescriptor","enumerable","configurable","has","on","eventName","callback","push","unSet","newValue","unReset","use","_len2","subscriptions","_key2","unsubs","reduce","subscription","unsub","forceUpdate","createObservableMap","getRenderingRef","elmsToUpdate","clear","elm","items","includes","appendToMap","elements","elms","stencilSubscription","createStore"],"sourceRoot":""}