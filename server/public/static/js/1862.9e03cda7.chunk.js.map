{"version":3,"file":"static/js/1862.9e03cda7.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-plugin-main.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/index-2b010b0f.js"],"sourcesContent":["import { r as registerInstance, w as writeTask, h, H as Host } from './index-60449c9e.js';\nimport { d as defaultIconPack } from './default-language-95a0d199.js';\nimport { u as useLanguage } from './index-2b010b0f.js';\n\nconst dytePluginMainCss = \":host{display:flex;height:100%;width:100%;flex-direction:column;overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);font-family:var(--dyte-font-family, sans-serif);color:rgb(var(--dyte-colors-text-1000, 255 255 255))}header{display:flex;height:var(--dyte-space-8, 32px);align-items:center;justify-content:space-between;padding-left:var(--dyte-space-3, 12px);padding-right:var(--dyte-space-3, 12px);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-900, 26 26 26) / var(--tw-bg-opacity))}header>div{display:flex;align-items:center}dyte-button{display:flex;height:var(--dyte-space-5, 20px);width:var(--dyte-space-5, 20px);flex-direction:column;align-items:center;border-radius:9999px}dyte-button dyte-icon{height:var(--dyte-space-3, 12px);width:var(--dyte-space-3, 12px)}iframe{display:block;flex:1 1 0%;margin:var(--dyte-space-0, 0px);border-width:var(--dyte-border-width-none, 0);border-style:none;padding:var(--dyte-space-0, 0px);outline:2px solid transparent;outline-offset:2px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity))}.iframe-container{position:relative;height:100%;width:100%}.block-inputs{position:absolute;z-index:10;height:100%;width:100%;border-left-width:var(--dyte-border-width-none, 0);border-top-width:var(--dyte-border-width-lg, 4px);border-style:solid;--tw-border-opacity:1;border-color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-border-opacity))}iframe{height:100%;width:100%}\";\n\nconst DytePluginMain = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.meeting = undefined;\n    this.plugin = undefined;\n    this.iconPack = defaultIconPack;\n    this.t = useLanguage();\n    this.canClosePlugin = false;\n    this.canControl = true;\n    this.viewModeEnabled = false;\n  }\n  componentDidLoad() {\n    this.meetingChanged(this.meeting);\n    this.pluginChanged(this.plugin);\n  }\n  meetingChanged(meeting) {\n    var _a;\n    if (meeting != null) {\n      const permissions = meeting.self.permissions;\n      const canEditACL = permissions.isV2\n        ? permissions.plugins.canEditConfig\n        : permissions.plugins.canEditAcl;\n      if (permissions.plugins.config !== undefined) {\n        // camelcase ts normalizer in webcore also normalize uuid\n        // temp hack\n        Object.keys(permissions.plugins.config || {}).forEach((k) => {\n          permissions.plugins.config[k.toLowerCase()] = permissions.plugins.config[k];\n        });\n        const normalizedPluginId = this.plugin.id.replace(new RegExp('-', 'g'), '');\n        const whitelistedControl = (((_a = permissions.plugins.config[normalizedPluginId]) === null || _a === void 0 ? void 0 : _a.defaultAccess) || 'blacklist') ===\n          'whitelist';\n        if (this.plugin.enabledBy === meeting.self.userId || canEditACL) {\n          this.canControl = true;\n        }\n        else if (whitelistedControl) {\n          this.canControl = false;\n        }\n        this.viewModeEnabled = !this.canControl;\n      }\n      writeTask(() => {\n        this.canClosePlugin = meeting.self.permissions.plugins.canClose;\n      });\n    }\n  }\n  pluginChanged(plugin) {\n    this.toggleViewModeListener = (enable) => {\n      this.viewModeEnabled = enable;\n    };\n    if (plugin != null) {\n      plugin.addPluginView(this.iframeEl);\n      plugin.addListener('toggleViewMode', this.toggleViewModeListener);\n    }\n  }\n  disconnectedCallback() {\n    var _a;\n    (_a = this.plugin) === null || _a === void 0 ? void 0 : _a.removeListener('toggleViewMode', this.toggleViewModeListener);\n  }\n  render() {\n    if (this.plugin == null)\n      return null;\n    return (h(Host, null, h(\"header\", { part: \"header\" }, h(\"div\", null, this.plugin.name), this.canClosePlugin && (h(\"div\", null, h(\"dyte-button\", { kind: \"icon\", onClick: () => this.plugin.deactivate(), part: \"button\", iconPack: this.iconPack, t: this.t }, h(\"dyte-icon\", { icon: this.iconPack.dismiss, iconPack: this.iconPack, t: this.t }))))), h(\"div\", { class: 'iframe-container' }, !this.canControl && (this.viewModeEnabled ? h(\"div\", { class: \"block-inputs\" }) : null), h(\"iframe\", { ref: (el) => (this.iframeEl = el), part: \"iframe\" }))));\n  }\n  static get watchers() { return {\n    \"meeting\": [\"meetingChanged\"],\n    \"plugin\": [\"pluginChanged\"]\n  }; }\n};\nDytePluginMain.style = dytePluginMainCss;\n\nexport { DytePluginMain as dyte_plugin_main };\n","import { a as defaultLanguage } from './default-language-95a0d199.js';\n\n// Replace with cdn base path in prod\nconst LANG_BASE_URL = 'http://localhost:5000';\nconst getLangData = async (lang) => {\n  if (lang == null || lang === 'en' || lang.trim() === '') {\n    return defaultLanguage;\n  }\n  try {\n    const res = await fetch(`${LANG_BASE_URL}/${lang}.json`);\n    if (!res.ok) {\n      return defaultLanguage;\n    }\n    // merge fetched language with defaultLanguage to avoid empty properties\n    return Object.assign({}, defaultLanguage, await res.json());\n  }\n  catch (_) {\n    return defaultLanguage;\n  }\n};\n/**\n * Creates an i18n instance from a language dictionary/object.\n * @param lang The language dictionary\n * @returns A function which handles i18n\n */\nconst useLanguage = (lang = defaultLanguage) => {\n  return (key) => {\n    var _a;\n    return (_a = lang[key]) !== null && _a !== void 0 ? _a : key;\n  };\n};\n\nexport { getLangData as g, useLanguage as u };\n"],"names":["DytePluginMain","hostRef","_classCallCheck","registerInstance","this","meeting","undefined","plugin","iconPack","defaultIconPack","t","useLanguage","canClosePlugin","canControl","viewModeEnabled","_createClass","key","value","meetingChanged","pluginChanged","_a","_this","permissions","self","canEditACL","isV2","plugins","canEditConfig","canEditAcl","config","Object","keys","forEach","k","toLowerCase","normalizedPluginId","id","replace","RegExp","whitelistedControl","defaultAccess","enabledBy","userId","writeTask","canClose","_this2","toggleViewModeListener","enable","addPluginView","iframeEl","addListener","removeListener","_this3","h","Host","part","name","kind","onClick","deactivate","icon","dismiss","class","ref","el","get","style","getLangData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","lang","res","wrap","_context","prev","next","trim","abrupt","defaultLanguage","fetch","concat","sent","ok","t0","t1","t2","json","t3","assign","call","t4","stop","_x","apply","arguments","length"],"sourceRoot":""}