{"version":3,"file":"static/js/1817.9ae49ba5.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-chat.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/flags-abd72beb.js","../node_modules/@dytesdk/ui-kit/dist/esm/index-2b010b0f.js"],"sourcesContent":["import { r as registerInstance, h, H as Host, g as getElement } from './index-60449c9e.js';\nimport { d as defaultIconPack } from './default-language-95a0d199.js';\nimport { u as useLanguage } from './index-2b010b0f.js';\nimport { g as generateChatGroupKey, h as handleFilesDataTransfer, p as parseMessageForTarget } from './chat-0611caa4.js';\nimport { c as chatUnreadTimestamps } from './user-prefs-f52d234f.js';\nimport { d as defaultConfig } from './default-ui-config-5c37753d.js';\nimport { F as FlagsmithFeatureFlags } from './flags-abd72beb.js';\nimport './graceful-storage-33bc316d.js';\n\nconst dyteChatCss = \":host{display:flex;height:100%;width:100%;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);font-size:14px;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}h3{margin:var(--dyte-space-0, 0px);display:flex;height:var(--dyte-space-12, 48px);align-items:center;justify-content:center;font-size:16px;font-weight:400;color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));text-align:center}#dropzone{position:absolute;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);z-index:10;display:none;flex-direction:column;align-items:center;justify-content:center;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-800, 30 30 30) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-700, 255 255 255 / 0.64))}#dropzone.active{display:flex;-webkit-animation:0.2s slide-up ease-in;animation:0.2s slide-up ease-in}dyte-chat-messages-ui{flex:1 0 0}\";\n\nconst DyteChat = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.disconnectMeeting = (meeting) => {\n      var _a;\n      if (this.isPrivateChatSupported()) {\n        meeting === null || meeting === void 0 ? void 0 : meeting.participants.joined.removeListener('participantsUpdate', this.onParticipantUpdate);\n        meeting === null || meeting === void 0 ? void 0 : meeting.participants.joined.addListener('participantLeft', this.onParticipantUpdate);\n      }\n      (_a = meeting === null || meeting === void 0 ? void 0 : meeting.chat) === null || _a === void 0 ? void 0 : _a.removeListener('chatUpdate', this.chatUpdateListener);\n    };\n    this.onParticipantUpdate = () => {\n      this.participants = this.meeting.participants.joined.toArray();\n      // if selected participant leaves, reset state to everyone\n      if (this.selectedParticipant && !this.participants.includes(this.selectedParticipant)) {\n        this.selectedParticipant = null;\n        this.chatRecipientId = this.selectedGroup = 'everyone';\n      }\n    };\n    this.updateUnreadCountGroups = (obj) => {\n      this.unreadCountGroups = Object.assign(Object.assign({}, this.unreadCountGroups), obj);\n    };\n    this.isPrivateChatSupported = () => {\n      var _a, _b, _c;\n      return (this.canPrivateMessage &&\n        !this.disablePrivateChat &&\n        ((_c = (_b = (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.__internals__) === null || _b === void 0 ? void 0 : _b.features) === null || _c === void 0 ? void 0 : _c.getFeatureValue('chat_socket_server')) ===\n          'socket-service');\n    };\n    this.updateRecipients = (event) => {\n      if (typeof event.detail === 'string') {\n        this.chatRecipientId = 'everyone';\n        this.selectedParticipant = null;\n      }\n      else {\n        const { userId } = event.detail;\n        this.chatRecipientId = userId;\n        this.selectedParticipant = this.participants.find((p) => p.userId === userId);\n      }\n      if (this.chatRecipientId !== 'everyone') {\n        const allParticipants = [this.chatRecipientId, this.meeting.self.userId];\n        const targetKey = generateChatGroupKey(allParticipants);\n        this.selectedGroup = targetKey;\n      }\n      else {\n        this.selectedGroup = 'everyone';\n      }\n      this.updateUnreadCountGroups({ [this.selectedGroup]: 0 });\n    };\n    this.isTextMessagingAllowed = () => {\n      if (this.chatRecipientId === 'everyone') {\n        // public chat\n        return this.canSend && this.canSendTextMessage;\n      }\n      // private chat\n      return this.canPrivateMessage && this.canSendPrivateTexts;\n    };\n    this.isFileMessagingAllowed = () => {\n      if (this.chatRecipientId === 'everyone') {\n        // public chat\n        return this.canSend && this.canSendFiles;\n      }\n      // private chat\n      return this.canPrivateMessage && this.canSendPrivateFiles;\n    };\n    this.meeting = undefined;\n    this.config = defaultConfig;\n    this.size = undefined;\n    this.iconPack = defaultIconPack;\n    this.t = useLanguage();\n    this.disablePrivateChat = false;\n    this.privatePresetFilter = [];\n    this.unreadCountGroups = {};\n    this.chatGroups = { everyone: [] };\n    this.selectedGroup = 'everyone';\n    this.now = new Date();\n    this.dropzoneActivated = false;\n    this.showLatestMessageButton = false;\n    this.canSend = false;\n    this.canSendTextMessage = false;\n    this.canSendFiles = false;\n    this.canPrivateMessage = false;\n    this.canSendPrivateTexts = false;\n    this.canSendPrivateFiles = false;\n    this.emojiPickerEnabled = false;\n    this.chatRecipientId = 'everyone';\n    this.participants = [];\n    this.selectedParticipant = undefined;\n  }\n  connectedCallback() {\n    this.meetingChanged(this.meeting);\n    if (this.meeting && !this.meeting.chat) {\n      return;\n    }\n    if (this.isFileMessagingAllowed()) {\n      this.host.addEventListener('dragover', (e) => {\n        e.preventDefault();\n        this.dropzoneActivated = true;\n      });\n      this.host.addEventListener('dragleave', () => {\n        this.dropzoneActivated = false;\n      });\n      this.host.addEventListener('drop', (e) => {\n        e.preventDefault();\n        this.dropzoneActivated = false;\n        handleFilesDataTransfer(e.dataTransfer.items, (type, file) => {\n          var _a, _b, _c, _d;\n          switch (type) {\n            case 'image':\n              if (this.isFileMessagingAllowed()) {\n                (_b = (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.chat) === null || _b === void 0 ? void 0 : _b.sendImageMessage(file, this.getRecipientPeerIds());\n              }\n              break;\n            case 'file':\n              if (this.isFileMessagingAllowed()) {\n                (_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.chat) === null || _d === void 0 ? void 0 : _d.sendFileMessage(file, this.getRecipientPeerIds());\n              }\n              break;\n          }\n        });\n      });\n    }\n  }\n  disconnectedCallback() {\n    this.disconnectMeeting(this.meeting);\n  }\n  meetingChanged(meeting, oldMeeting) {\n    var _a, _b, _c, _d, _e;\n    if (oldMeeting != undefined)\n      this.disconnectMeeting(oldMeeting);\n    if (meeting && !meeting.chat)\n      return;\n    if (meeting != null) {\n      this.canSend = meeting.self.permissions.chatPublic.canSend;\n      this.canSendTextMessage = meeting.self.permissions.chatPublic.text;\n      this.canSendFiles = meeting.self.permissions.chatPublic.files;\n      this.canPrivateMessage =\n        ((_a = meeting.self.permissions.chatPrivate) === null || _a === void 0 ? void 0 : _a.canSend) ||\n          ((_b = meeting.self.permissions.chatPrivate) === null || _b === void 0 ? void 0 : _b.canReceive);\n      this.canSendPrivateTexts = (_c = meeting.self.permissions.chatPrivate) === null || _c === void 0 ? void 0 : _c.text;\n      this.canSendPrivateFiles = (_d = meeting.self.permissions.chatPrivate) === null || _d === void 0 ? void 0 : _d.files;\n      this.initializeChatGroups();\n      // shallow copy to trigger render\n      this.chatGroups = Object.assign({}, this.chatGroups);\n      this.chatUpdateListener = ({ message }) => {\n        this.addToChatGroup(message);\n        // shallow copy to trigger render\n        this.chatGroups = Object.assign({}, this.chatGroups);\n      };\n      this.onParticipantUpdate();\n      (_e = meeting.chat) === null || _e === void 0 ? void 0 : _e.addListener('chatUpdate', this.chatUpdateListener);\n      if (this.isPrivateChatSupported()) {\n        meeting.participants.joined.addListener('participantJoined', this.onParticipantUpdate);\n        meeting.participants.joined.addListener('participantLeft', this.onParticipantUpdate);\n      }\n    }\n  }\n  chatGroupsChanged(chatGroups) {\n    var _a, _b;\n    if (!this.isPrivateChatSupported()) {\n      return;\n    }\n    const unreadCounts = {};\n    for (const key in chatGroups) {\n      const lastReadTimestamp = (_a = chatUnreadTimestamps[key]) !== null && _a !== void 0 ? _a : 0;\n      unreadCounts[key] = chatGroups[key].filter((c) => c.type == 'chat' &&\n        c.message.time > lastReadTimestamp &&\n        c.message.userId !== this.meeting.self.userId).length;\n      if (key ===\n        generateChatGroupKey([this.meeting.self.userId, (_b = this.selectedParticipant) === null || _b === void 0 ? void 0 : _b.userId]) ||\n        (key === 'everyone' && this.selectedParticipant === null)) {\n        unreadCounts[key] = 0;\n        chatUnreadTimestamps[key] = new Date();\n      }\n    }\n    this.updateUnreadCountGroups(unreadCounts);\n  }\n  initializeChatGroups() {\n    var _a;\n    (_a = this.meeting.chat) === null || _a === void 0 ? void 0 : _a.messages.forEach((message) => {\n      this.addToChatGroup(message);\n    });\n  }\n  addToChatGroup(message) {\n    var _a;\n    const parsedMessage = parseMessageForTarget(message);\n    let key = 'everyone';\n    if (((_a = parsedMessage.targetUserIds) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n      const allParticipants = new Set([\n        parsedMessage.userId,\n        ...parsedMessage.targetUserIds,\n      ]);\n      key = generateChatGroupKey(Array.from(allParticipants));\n    }\n    if (this.chatGroups[key] === undefined)\n      this.chatGroups[key] = [];\n    this.chatGroups[key] = [\n      ...this.chatGroups[key],\n      { type: 'chat', message: parsedMessage },\n    ];\n  }\n  getRecipientPeerIds() {\n    let peerIds = [];\n    if (this.chatRecipientId !== 'everyone') {\n      peerIds = [this.selectedParticipant.id];\n    }\n    return peerIds;\n  }\n  render() {\n    var _a, _b, _c, _d;\n    const uiProps = { iconPack: this.iconPack, t: this.t, size: this.size };\n    const selfUserId = (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.self.userId;\n    const chatMessages = this.chatGroups[this.selectedGroup] || [];\n    return (h(Host, null, this.isFileMessagingAllowed() && (h(\"div\", { id: \"dropzone\", class: { active: this.dropzoneActivated }, part: \"dropzone\" }, h(\"dyte-icon\", { icon: this.iconPack.attach, iconPack: this.iconPack, t: this.t }), h(\"p\", null, this.t('Drop files/images to send')))), this.isPrivateChatSupported() && (h(\"dyte-chat-selector-ui\", Object.assign({ selfUserId: selfUserId, groups: this.participants, selectedGroupId: (_b = this.selectedParticipant) === null || _b === void 0 ? void 0 : _b.userId, unreadCounts: this.unreadCountGroups, onDyteChatGroupChanged: this.updateRecipients }, uiProps))), h(\"dyte-chat-messages-ui\", Object.assign({ messages: chatMessages, selfUserId: selfUserId, selectedGroup: this.selectedGroup }, uiProps)), h(\"dyte-chat-composer-ui\", Object.assign({ canSendTextMessage: this.isTextMessagingAllowed(), canSendFiles: this.isFileMessagingAllowed(), disableEmojiPicker: !!((_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.__internals__) === null || _d === void 0 ? void 0 : _d.features.hasFeature(FlagsmithFeatureFlags.DISABLE_EMOJI_PICKER)), onDyteNewMessage: (e) => {\n        var _a, _b, _c, _d, _e, _f;\n        const message = e.detail;\n        switch (message.type) {\n          case 'text':\n            (_b = (_a = this.meeting) === null || _a === void 0 ? void 0 : _a.chat) === null || _b === void 0 ? void 0 : _b.sendTextMessage(message.message, this.getRecipientPeerIds());\n            break;\n          case 'image':\n            (_d = (_c = this.meeting) === null || _c === void 0 ? void 0 : _c.chat) === null || _d === void 0 ? void 0 : _d.sendImageMessage(message.file, this.getRecipientPeerIds());\n            break;\n          case 'file':\n            (_f = (_e = this.meeting) === null || _e === void 0 ? void 0 : _e.chat) === null || _f === void 0 ? void 0 : _f.sendFileMessage(message.file, this.getRecipientPeerIds());\n            break;\n        }\n      } }, uiProps), h(\"slot\", { name: \"chat-addon\", slot: \"chat-addon\" }))));\n  }\n  get host() { return getElement(this); }\n  static get watchers() { return {\n    \"meeting\": [\"meetingChanged\"],\n    \"chatGroups\": [\"chatGroupsChanged\"]\n  }; }\n};\nDyteChat.style = dyteChatCss;\n\nexport { DyteChat as dyte_chat };\n","const FlagsmithFeatureFlags = {\n  PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE: 'play_participant_tile_video_on_pause',\n  DISABLE_EMOJI_PICKER: 'disable_emoji_picker',\n};\n\nexport { FlagsmithFeatureFlags as F };\n","import { a as defaultLanguage } from './default-language-95a0d199.js';\n\n// Replace with cdn base path in prod\nconst LANG_BASE_URL = 'http://localhost:5000';\nconst getLangData = async (lang) => {\n  if (lang == null || lang === 'en' || lang.trim() === '') {\n    return defaultLanguage;\n  }\n  try {\n    const res = await fetch(`${LANG_BASE_URL}/${lang}.json`);\n    if (!res.ok) {\n      return defaultLanguage;\n    }\n    // merge fetched language with defaultLanguage to avoid empty properties\n    return Object.assign({}, defaultLanguage, await res.json());\n  }\n  catch (_) {\n    return defaultLanguage;\n  }\n};\n/**\n * Creates an i18n instance from a language dictionary/object.\n * @param lang The language dictionary\n * @returns A function which handles i18n\n */\nconst useLanguage = (lang = defaultLanguage) => {\n  return (key) => {\n    var _a;\n    return (_a = lang[key]) !== null && _a !== void 0 ? _a : key;\n  };\n};\n\nexport { getLangData as g, useLanguage as u };\n"],"names":["DyteChat","hostRef","_this","_classCallCheck","registerInstance","this","disconnectMeeting","meeting","_a","isPrivateChatSupported","participants","joined","removeListener","onParticipantUpdate","addListener","chat","chatUpdateListener","toArray","selectedParticipant","includes","chatRecipientId","selectedGroup","updateUnreadCountGroups","obj","unreadCountGroups","Object","assign","_b","_c","canPrivateMessage","disablePrivateChat","__internals__","features","getFeatureValue","updateRecipients","event","detail","userId","find","p","allParticipants","self","targetKey","generateChatGroupKey","_defineProperty","isTextMessagingAllowed","canSend","canSendTextMessage","canSendPrivateTexts","isFileMessagingAllowed","canSendFiles","canSendPrivateFiles","undefined","config","defaultConfig","size","iconPack","defaultIconPack","t","useLanguage","privatePresetFilter","chatGroups","everyone","now","Date","dropzoneActivated","showLatestMessageButton","emojiPickerEnabled","_createClass","key","value","_this2","meetingChanged","host","addEventListener","e","preventDefault","handleFilesDataTransfer","dataTransfer","items","type","file","_d","sendImageMessage","getRecipientPeerIds","sendFileMessage","oldMeeting","_e","_this3","permissions","chatPublic","text","files","chatPrivate","canReceive","initializeChatGroups","_ref","message","addToChatGroup","_this4","unreadCounts","_loop","lastReadTimestamp","chatUnreadTimestamps","filter","c","time","length","_this5","messages","forEach","parsedMessage","parseMessageForTarget","targetUserIds","Set","concat","_toConsumableArray","Array","from","peerIds","id","_this6","uiProps","selfUserId","chatMessages","h","Host","class","active","part","icon","attach","groups","selectedGroupId","onDyteChatGroupChanged","disableEmojiPicker","hasFeature","FlagsmithFeatureFlags","onDyteNewMessage","_f","sendTextMessage","name","slot","get","getElement","style","PLAY_PARTICIPANT_TILE_VIDEO_ON_PAUSE","DISABLE_EMOJI_PICKER","getLangData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","lang","res","wrap","_context","prev","next","trim","abrupt","defaultLanguage","fetch","sent","ok","t0","t1","t2","json","t3","call","t4","stop","_x","apply","arguments"],"sourceRoot":""}