{"version":3,"file":"static/js/8555.26cd8b00.chunk.js","mappings":"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","sources":["../node_modules/@dytesdk/ui-kit/dist/esm/dyte-participant-setup.entry.js","../node_modules/@dytesdk/ui-kit/dist/esm/index-2b010b0f.js","../node_modules/@dytesdk/ui-kit/dist/esm/store-183b9cab.js"],"sourcesContent":["import { r as registerInstance, h, H as Host } from './index-60449c9e.js';\nimport { s as state } from './store-183b9cab.js';\nimport { d as defaultIconPack } from './default-language-95a0d199.js';\nimport { u as useLanguage } from './index-2b010b0f.js';\n\nconst dyteParticipantSetupCss = \":host{position:relative;display:flex;align-items:center;justify-content:center;font-family:var(--dyte-font-family, sans-serif);aspect-ratio:16 / 9;height:var(--dyte-space-56, 224px);overflow:hidden;border-radius:var(--dyte-border-radius-lg, 12px);-webkit-user-select:none;-moz-user-select:none;user-select:none;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-video-bg, 24 24 24) / var(--tw-bg-opacity));transition-property:var(--dyte-transition-property, all);transition-duration:150ms}@media (prefers-reduced-motion){:host{--dyte-transition-property:none}}:host([size='sm'][variant='solid']) ::slotted(dyte-name-tag){left:var(--dyte-space-2, 8px);bottom:var(--dyte-space-2, 8px);height:var(--dyte-space-4, 16px)}video{display:none;position:absolute;height:100%;width:100%;border-radius:var(--dyte-border-radius-lg, 12px)}video.contain{-o-object-fit:contain;object-fit:contain}video.cover{-o-object-fit:cover;object-fit:cover}video.visible{display:block}video::-webkit-media-controls{display:none !important}:host([variant='gradient']) ::slotted(dyte-audio-visualizer){position:absolute;top:var(--dyte-space-2, 8px);right:var(--dyte-space-2, 8px);border-radius:9999px;--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-brand-500, 33 96 253) / var(--tw-bg-opacity));padding:var(--dyte-space-2, 8px)}:host([variant='gradient']) ::slotted(dyte-name-tag){bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);display:flex;width:100%;align-items:center;justify-content:center;text-align:center;background-color:transparent;background-image:linear-gradient(to top, var(--tw-gradient-stops));--tw-gradient-from:rgb(var(--dyte-colors-background-1000, 8 8 8));--tw-gradient-to:rgba(var(--dyte-colors-background-1000, 8 8 8) / 0);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to);--tw-gradient-to:transparent}video.mirror{transform:scaleX(-1)}@media (orientation: portrait){:host{height:var(--dyte-space-44, 176px)}}\";\n\nconst DyteParticipantSetup = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.onVideoUpdate = (videoState) => {\n      this.videoState = videoState;\n    };\n    this.onPinned = ({ isPinned }) => {\n      this.isPinned = isPinned;\n    };\n    this.videoState = undefined;\n    this.isPinned = false;\n    this.nameTagPosition = 'bottom-left';\n    this.isPreview = false;\n    this.participant = undefined;\n    this.states = undefined;\n    this.config = undefined;\n    this.variant = 'solid';\n    this.size = undefined;\n    this.iconPack = defaultIconPack;\n    this.t = useLanguage();\n  }\n  connectedCallback() {\n    // set videoState before initial render and initialize listeners\n    this.participantsChanged(this.participant);\n  }\n  componentDidLoad() {\n    // load videoState into video element after first render\n    this.videoStateChanged(this.videoState);\n  }\n  disconnectedCallback() {\n    if (this.participant == null)\n      return;\n    this.participant.removeListener('videoUpdate', this.onVideoUpdate);\n    this.participant.removeListener('pinned', this.onPinned);\n    this.participant.removeListener('unpinned', this.onPinned);\n  }\n  async participantsChanged(participant) {\n    if (participant != null) {\n      this.videoState = {\n        videoEnabled: participant.videoEnabled,\n        videoTrack: participant.videoTrack,\n      };\n      this.isPinned = participant.isPinned;\n      participant.addListener('videoUpdate', this.onVideoUpdate);\n      participant.addListener('pinned', this.onPinned);\n      participant.addListener('unpinned', this.onPinned);\n    }\n  }\n  videoStateChanged(videoState) {\n    if (videoState != null && this.videoEl != null) {\n      if (videoState.videoEnabled) {\n        const stream = new MediaStream();\n        stream.addTrack(videoState.videoTrack);\n        this.videoEl.srcObject = stream;\n      }\n      else {\n        this.videoEl.srcObject = undefined;\n      }\n    }\n  }\n  isMirrored() {\n    var _a;\n    if (this.participant != null) {\n      const isSelf = 'preview' in this.participant || this.isPreview;\n      if (isSelf) {\n        const states = this.states || state;\n        const mirrorVideo = (_a = states === null || states === void 0 ? void 0 : states.prefs) === null || _a === void 0 ? void 0 : _a.mirrorVideo;\n        if (typeof mirrorVideo === 'boolean') {\n          return mirrorVideo;\n        }\n      }\n    }\n    return false;\n  }\n  render() {\n    var _a, _b, _c, _d;\n    return (h(Host, null, h(\"video\", { ref: (el) => (this.videoEl = el), class: {\n        visible: (_a = this.videoState) === null || _a === void 0 ? void 0 : _a.videoEnabled,\n        mirror: this.isMirrored(),\n        [(_d = (_c = (_b = this.config) === null || _b === void 0 ? void 0 : _b.config) === null || _c === void 0 ? void 0 : _c.videoFit) !== null && _d !== void 0 ? _d : 'cover']: true,\n      }, autoPlay: true, playsInline: true, muted: true }), this.isPinned && (h(\"dyte-icon\", { class: \"pinned-icon\", icon: this.iconPack.pin, \"aria-label\": this.t('Pinned'), iconPack: this.iconPack, t: this.t })), h(\"slot\", null)));\n  }\n  static get watchers() { return {\n    \"participant\": [\"participantsChanged\"],\n    \"videoState\": [\"videoStateChanged\"]\n  }; }\n};\nDyteParticipantSetup.style = dyteParticipantSetupCss;\n\nexport { DyteParticipantSetup as dyte_participant_setup };\n","import { a as defaultLanguage } from './default-language-95a0d199.js';\n\n// Replace with cdn base path in prod\nconst LANG_BASE_URL = 'http://localhost:5000';\nconst getLangData = async (lang) => {\n  if (lang == null || lang === 'en' || lang.trim() === '') {\n    return defaultLanguage;\n  }\n  try {\n    const res = await fetch(`${LANG_BASE_URL}/${lang}.json`);\n    if (!res.ok) {\n      return defaultLanguage;\n    }\n    // merge fetched language with defaultLanguage to avoid empty properties\n    return Object.assign({}, defaultLanguage, await res.json());\n  }\n  catch (_) {\n    return defaultLanguage;\n  }\n};\n/**\n * Creates an i18n instance from a language dictionary/object.\n * @param lang The language dictionary\n * @returns A function which handles i18n\n */\nconst useLanguage = (lang = defaultLanguage) => {\n  return (key) => {\n    var _a;\n    return (_a = lang[key]) !== null && _a !== void 0 ? _a : key;\n  };\n};\n\nexport { getLangData as g, useLanguage as u };\n","import { a as getRenderingRef, f as forceUpdate } from './index-60449c9e.js';\n\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\n\n/**\n * Check if a possible element isConnected.\n * The property might not be there, so we check for it.\n *\n * We want it to return true if isConnected is not a property,\n * otherwise we would remove these elements and would not update.\n *\n * Better leak in Edge than to be useless.\n */\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        // If we are not in a stencil project, we do nothing.\n        // This function is not really exported by @stencil/core.\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\n\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        var _a;\n        // When resetting the state, the default state may be a function - unwrap it to invoke it.\n        // otherwise, the state won't be properly reset\n        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        // Call first dispose as resetting the state would\n        // cause less updates ;)\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        // We need to unwrap the defaultState because it might be a function.\n        // Otherwise we might not be sending the right reset value.\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\n\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\n\nconst { state, onChange } = createStore({});\n\nexport { onChange as o, state as s };\n"],"names":["DyteParticipantSetup","hostRef","_this","_classCallCheck","registerInstance","this","onVideoUpdate","videoState","onPinned","_ref","isPinned","undefined","nameTagPosition","isPreview","participant","states","config","variant","size","iconPack","defaultIconPack","t","useLanguage","_createClass","key","value","participantsChanged","videoStateChanged","removeListener","_participantsChanged","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","videoEnabled","videoTrack","addListener","stop","_x","apply","arguments","videoEl","stream","MediaStream","addTrack","srcObject","_a","state","mirrorVideo","prefs","_b","_c","_d","_this2","h","Host","ref","el","class","_defineProperty","visible","mirror","isMirrored","videoFit","autoPlay","playsInline","muted","icon","pin","get","style","getLangData","lang","res","trim","abrupt","defaultLanguage","fetch","concat","sent","ok","t0","Object","t1","t2","json","t3","assign","call","t4","length","isConnected","maybeElement","cleanupElements","fn","ms","timeoutId","_len","args","Array","_key","clearTimeout","setTimeout","debounce","map","_step","_iterator","_createForOfIteratorHelper","keys","s","n","done","set","filter","err","e","f","unwrap","val","removeFromArray","array","item","index","indexOf","_createStore","defaultState","shouldUpdate","a","b","unwrappedState","Map","entries","handlers","dispose","reset","forEach","cb","propName","oldValue","Proxy","_","ownKeys","from","getOwnPropertyDescriptor","enumerable","configurable","has","on","eventName","callback","push","onChange","unSet","newValue","unReset","use","_len2","subscriptions","_key2","unsubs","reduce","subscription","unsub","forceUpdate","createObservableMap","getRenderingRef","elmsToUpdate","clear","elm","items","includes","appendToMap","elements","elms","stencilSubscription","createStore"],"sourceRoot":""}