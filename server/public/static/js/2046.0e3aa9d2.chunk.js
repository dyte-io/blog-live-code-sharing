"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2046],{2046:function(e,t,n){n.r(t),n.d(t,{dyte_meeting:function(){return y}});var i=n(5671),o=n(3144),s=n(4165),r=n(5861),a=n(325),c=n(9442),u=n(859),d=n(7239),f=n(1654),l=n(222),h=n(4153),g=n(5100),v=n(5769),m=(n(4130),function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",d.d);case 2:return e.prev=2,e.next=5,fetch(t);case 5:if((n=e.sent).ok){e.next=8;break}return e.abrupt("return",d.d);case 8:return e.t0=Object,e.t1={},e.t2=d.d,e.next=13,n.json();case 13:return e.t3=e.sent,e.abrupt("return",e.t0.assign.call(e.t0,e.t1,e.t2,e.t3));case 17:return e.prev=17,e.t4=e.catch(2),e.abrupt("return",d.d);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()),p=768,k=1080,y=function(){function e(t){var n=this;(0,i.Z)(this,e),(0,a.r)(this,t),this.stateUpdate=(0,a.c)(this,"dyteStateUpdate",7),this.roomJoinedListener=function(){n.setStates({meeting:"joined"}),g.s.meeting="joined"},this.waitlistedListener=function(){n.setStates({meeting:"waiting"}),g.s.meeting="waiting"},this.roomLeftListener=function(e){var t=e.state,i=n.states||g.s;if("disconnected"===(null===i||void 0===i?void 0:i.roomLeftState))return n.setStates({meeting:"ended",roomLeftState:t}),void(g.s.meeting="ended");n.setStates({meeting:"ended",roomLeftState:t}),g.s.meeting="ended",g.s.roomLeftState=t},this.mediaPermissionErrorListener=function(e){var t=e.kind;["audio","video"].includes(t)&&(n.setStates({activePermissionsMessage:!0}),g.s.activePermissionsMessage=!0)},this.joinStateAcceptedListener=function(){n.setStates({activeJoinStage:!0}),n.stateUpdate.emit({activeJoinStage:!0}),g.s.activeJoinStage=!0},this.onMoveToConnectedMeeting=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var i,o,r,a,c,u,d,f,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.meetingId,o=t.authToken,d={active:!0,icon:n.iconPack.breakout_rooms,title:"Breakout Rooms Initiated",description:"You are being moved to a breakout room. it may take a few moments."},n.meeting.meta.roomName!==(null===(r=n.meeting.connectedMeetings.parentMeeting)||void 0===r?void 0:r.id)&&(d={active:!0,icon:n.iconPack.breakout_rooms,title:"Switching to ".concat(null!==(c=null===(a=n.meeting.connectedMeetings.list.find((function(e){return e.id===i})))||void 0===a?void 0:a.title)&&void 0!==c?c:"Main Room"),description:"It may take a few moments."}),n.stateUpdate.emit({activeOverlayModal:d,activeBreakoutRoomGrid:!1}),g.s.activeOverlayModal=d,e.next=7,n.meeting.connectedMeetings.switchMeeting({authToken:o,defaults:{audio:!1,video:!1}});case 7:if(f=e.sent,n.clearListeners(null!==(u=n.newMeeting)&&void 0!==u?u:n.meeting),l="breakout-rooms",null==n.newMeeting){e.next=15;break}return e.next=13,n.newMeeting.leaveRoom(l);case 13:e.next=17;break;case 15:return e.next=17,n.meeting.leaveRoom(l);case 17:n.newMeeting=f,window.newM=n.newMeeting,n.meetingChanged(n.newMeeting),n.stateUpdate.emit({activeOverlayModal:{active:!1},activeBreakoutRooms:!0}),g.s.activeOverlayModal={active:!1},g.s.activeBreakoutRooms=!0;case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onConnectedMeetingState=function(e){var t,i=null===(t=e.meetings)||void 0===t?void 0:t.filter((function(e){return"ACTIVE"===e.status}));(null===i||void 0===i?void 0:i.length)>0?(g.s.activeBreakoutRooms=!0,n.stateUpdate.emit({activeBreakoutRooms:!0})):(n.stateUpdate.emit({activeBreakoutRoomGrid:!1,activeBreakoutRooms:!1}),g.s.activeBreakoutRoomGrid=!1,g.s.activeBreakoutRooms=!1)},this.loadConfigFromPreset=!0,this.applyDesignSystem=!0,this.mode="fixed",this.leaveOnUnmount=!1,this.meeting=void 0,this.showSetupScreen=void 0,this.language="en",this.config=f.d,this.iconPackUrl=void 0,this.size=void 0,this.gridLayout="row",this.states={meeting:"idle",prefs:{mirrorVideo:!0,muteNotificationSounds:!1}},this.newMeeting=void 0,this.iconPack=d.d,this.t=(0,u.u)()}return(0,o.Z)(e,[{key:"connectedCallback",value:function(){var e,t=this;this.resizeObserver=new v.i((function(){return t.handleResize()})),this.resizeObserver.observe(this.host),this.applyDesignSystem&&null!=(null===(e=this.config)||void 0===e?void 0:e.designTokens)&&"undefined"!==typeof document&&(0,c.p)(document.documentElement,this.config.designTokens),this.meetingChanged(this.meeting),this.iconPackUrlChanged(this.iconPackUrl),this.languageChanged(this.language),this.initializePreferences()}},{key:"clearListeners",value:function(e){var t,n,i,o;void 0!=e&&(e.self.removeListener("roomJoined",this.roomJoinedListener),e.self.removeListener("roomLeft",this.roomLeftListener),e.self.removeListener("mediaPermissionError",this.mediaPermissionErrorListener),e.self.removeListener("waitlisted",this.waitlistedListener),e.self.removeListener("joinStageRequestAccepted",this.joinStateAcceptedListener),null===(n=null===(t=this.meeting)||void 0===t?void 0:t.connectedMeetings)||void 0===n||n.removeListener("moveToConnectedMeeting",this.onMoveToConnectedMeeting),null===(o=null===(i=this.meeting)||void 0===i?void 0:i.connectedMeetings)||void 0===o||o.removeListener("connectedMeetingState",this.onConnectedMeetingState))}},{key:"disconnectedCallback",value:function(){var e;this.leaveOnUnmount&&(null===(e=this.meeting)||void 0===e||e.leaveRoom()),this.resizeObserver.disconnect(),this.clearListeners(this.meeting)}},{key:"meetingChanged",value:function(e){var t,n,i;if(null!=e){if(this.loadConfigFromPreset&&null!=e.self.config){var o=e.self.config,s=(0,c.g)(o),r=s.config,a=s.data;this.config===f.d&&(this.config=r),null==this.showSetupScreen&&(this.showSetupScreen=a.showSetupScreen)}this.applyDesignSystem&&null!=(null===(t=this.config)||void 0===t?void 0:t.designTokens)&&"undefined"!==typeof document&&(0,c.p)(document.documentElement,this.config.designTokens),e.self.addListener("waitlisted",this.waitlistedListener),e.self.addListener("roomJoined",this.roomJoinedListener),e.self.addListener("roomLeft",this.roomLeftListener),e.self.addListener("mediaPermissionError",this.mediaPermissionErrorListener),e.self.addListener("joinStageRequestAccepted",this.joinStateAcceptedListener),null===(n=e.connectedMeetings)||void 0===n||n.addListener("connectedMeetingState",this.onConnectedMeetingState),null===(i=e.connectedMeetings)||void 0===i||i.addListener("moveToConnectedMeeting",this.onMoveToConnectedMeeting),this.showSetupScreen&&null==this.newMeeting?(this.states=Object.assign(Object.assign({},this.states),{meeting:"setup"}),g.s.meeting="setup"):e.joinRoom()}}},{key:"iconPackUrlChanged",value:function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:this.iconPack=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"languageChanged",value:function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.u,e.next=3,(0,u.g)(t);case 3:e.t1=e.sent,this.t=(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listenState",value:function(e){e.stopPropagation(),this.setStates(e.detail)}},{key:"initializePreferences",value:function(){var e=(0,h.g)();this.setStates({prefs:e}),g.s.prefs=e}},{key:"handleResize",value:function(){var e;this.size=(e=this.host.clientWidth)>=k?"lg":e>=p?"md":"sm"}},{key:"setStates",value:function(e){var t=Object.assign({},this.states);(0,c.m)(t,e),this.states=t}},{key:"render",value:function(){var e,t={meeting:null!==(e=this.newMeeting)&&void 0!==e?e:this.meeting,size:this.size,states:this.states||g.s,config:this.config,iconPack:this.iconPack,t:this.t},n={"dyte-grid":{layout:this.gridLayout}};return(0,a.h)(l.R,{element:"dyte-meeting",defaults:t,asHost:!0,elementProps:n})}},{key:"host",get:function(){return(0,a.g)(this)}}],[{key:"watchers",get:function(){return{meeting:["meetingChanged"],iconPackUrl:["iconPackUrlChanged"],language:["languageChanged"]}}}]),e}();y.style=":host{box-sizing:border-box;display:flex;flex-direction:column;font-family:var(--dyte-font-family, sans-serif);--tw-bg-opacity:1;background-color:rgba(var(--dyte-colors-background-1000, 8 8 8) / var(--tw-bg-opacity));color:rgb(var(--dyte-colors-text-900, 255 255 255 / 0.88));overflow:hidden;position:fixed;top:var(--dyte-space-0, 0px);right:var(--dyte-space-0, 0px);bottom:var(--dyte-space-0, 0px);left:var(--dyte-space-0, 0px);height:100%;width:100%}:host([mode='fill']){position:relative}"},5100:function(e,t,n){n.d(t,{o:function(){return f},s:function(){return d}});var i=n(7762),o=n(325),s=function(e){return!("isConnected"in e)||e.isConnected},r=function(e,t){var n;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n&&clearTimeout(n),n=setTimeout((function(){n=0,e.apply(void 0,o)}),t)}}((function(e){var t,n=(0,i.Z)(e.keys());try{for(n.s();!(t=n.n()).done;){var o=t.value;e.set(o,e.get(o).filter(s))}}catch(r){n.e(r)}finally{n.f()}}),2e3),a=function(e){return"function"===typeof e?e():e},c=function(e,t){var n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.length--)},u=function(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e!==t},n=a(e),i=new Map(Object.entries(null!==n&&void 0!==n?n:{})),o={dispose:[],get:[],set:[],reset:[]},s=function(){var t;i=new Map(Object.entries(null!==(t=a(e))&&void 0!==t?t:{})),o.reset.forEach((function(e){return e()}))},r=function(e){return o.get.forEach((function(t){return t(e)})),i.get(e)},u=function(e,n){var s=i.get(e);t(n,s,e)&&(i.set(e,n),o.set.forEach((function(t){return t(e,n,s)})))},d="undefined"===typeof Proxy?{}:new Proxy(n,{get:function(e,t){return r(t)},ownKeys:function(e){return Array.from(i.keys())},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0}},has:function(e,t){return i.has(t)},set:function(e,t,n){return u(t,n),!0}}),f=function(e,t){return o[e].push(t),function(){c(o[e],t)}};return{state:d,get:r,set:u,on:f,onChange:function(t,n){var i=f("set",(function(e,i){e===t&&n(i)})),o=f("reset",(function(){return n(a(e)[t])}));return function(){i(),o()}},use:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.reduce((function(e,t){return t.set&&e.push(f("set",t.set)),t.get&&e.push(f("get",t.get)),t.reset&&e.push(f("reset",t.reset)),t.dispose&&e.push(f("dispose",t.dispose)),e}),[]);return function(){return i.forEach((function(e){return e()}))}},dispose:function(){o.dispose.forEach((function(e){return e()})),s()},reset:s,forceUpdate:function(e){var t=i.get(e);o.set.forEach((function(n){return n(e,t,t)}))}}}(e,t);return n.use(function(){if("function"!==typeof o.a)return{};var e=new Map;return{dispose:function(){return e.clear()},get:function(t){var n=(0,o.a)();n&&function(e,t,n){var i=e.get(t);i?i.includes(n)||i.push(n):e.set(t,[n])}(e,t,n)},set:function(t){var n=e.get(t);n&&e.set(t,n.filter(o.f)),r(e)},reset:function(){e.forEach((function(e){return e.forEach(o.f)})),r(e)}}}()),n}({}),d=u.state,f=u.onChange}}]);
//# sourceMappingURL=2046.0e3aa9d2.chunk.js.map